---
phase: 40-dashboard-command-center
plan: 03
type: execute
wave: 2
depends_on: ["40-01"]
files_modified:
  - components/layout/sidebar.tsx
  - components/layout/app-shell.tsx
  - components/layout/notification-bell.tsx
  - components/onboarding/setup-progress.tsx
  - components/dashboard/welcome-card.tsx
  - components/dashboard/right-panel-getting-started.tsx
autonomous: true

must_haves:
  truths:
    - "NotificationBell component is removed from sidebar and app header"
    - "Dashboard nav item in sidebar shows badge with combined count of ready-to-send + needs-attention items"
    - "Getting Started content renders in right panel on dashboard (not as pill+drawer)"
    - "Setup progress pill and drawer are suppressed on dashboard page"
  artifacts:
    - path: "components/dashboard/right-panel-getting-started.tsx"
      provides: "Getting Started content for right panel"
      contains: "RightPanelGettingStarted"
    - path: "components/layout/sidebar.tsx"
      provides: "Sidebar without NotificationBell, with dashboard badge"
      contains: "dashboardBadge"
  key_links:
    - from: "components/layout/sidebar.tsx"
      to: "lib/types/dashboard.ts"
      via: "dashboard badge count from layout props"
      pattern: "dashboardBadge"
---

<objective>
Remove NotificationBell, restore dashboard nav badge, consolidate Getting Started into right panel, and clean up layout components.

Purpose: Simplifies the notification system (badge replaces bell) and consolidates getting-started content into the right panel per GS-01/GS-02/GS-03.
Output: Cleaner sidebar without bell, dashboard badge showing counts, Getting Started in right panel.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/40-dashboard-command-center/40-CONTEXT.md
@.planning/phases/40-dashboard-command-center/40-01-SUMMARY.md

# Source files being modified:
@components/layout/sidebar.tsx
@components/layout/app-shell.tsx
@components/layout/notification-bell.tsx
@components/onboarding/setup-progress.tsx
@components/dashboard/welcome-card.tsx
@lib/constants/checklist.ts
@app/(dashboard)/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove NotificationBell and restore dashboard nav badge</name>
  <files>components/layout/sidebar.tsx, components/layout/app-shell.tsx, components/layout/notification-bell.tsx, app/(dashboard)/layout.tsx</files>
  <action>
**Modify `components/layout/sidebar.tsx` (DN-01, DN-02):**

1. Remove the import of `NotificationBell` from `./notification-bell`
2. Remove the `notificationCounts` prop from `SidebarProps` interface
3. Remove the `NotificationBell` render in the footer section (the block inside `{notificationCounts && ...}`)
4. **Restore dashboard nav badge:** The `dashboardBadge` prop already exists but is currently unused (it's passed but `badge: undefined` is set in the NavLink map). Change the mainNav map to pass the badge:
   ```tsx
   {mainNav.map((item) => (
     <NavLink
       key={item.href}
       item={{
         ...item,
         badge: item.href === '/dashboard' ? dashboardBadge : undefined,
       }}
     />
   ))}
   ```
   Make sure the `Sidebar` component destructures `dashboardBadge` from props (currently it's destructured but `notificationCounts` is used from the function parameter — clean this up)

**Modify `components/layout/app-shell.tsx`:**

1. Remove `notificationCounts` from `AppShellProps` interface
2. Remove passing `notificationCounts` to `<Sidebar>` and `<PageHeader>`
3. Keep `dashboardBadge` prop — still needed for sidebar badge
4. Remove the `notificationCounts` prop from `<PageHeader>` (the mobile header) — the PageHeader should already be able to handle not receiving it. If PageHeader uses notificationCounts, also clean it up there.

**Modify `app/(dashboard)/layout.tsx`:**

1. Keep the `getDashboardCounts()` call — we still need the counts for the sidebar badge
2. Remove the `notificationCounts` prop being passed to `<AppShell>` — only pass `dashboardBadge={dashboardBadge}` (which is `counts.total`)
3. The `notificationCounts` variable can be removed entirely since we only need the total for the badge

**DO NOT delete** `components/layout/notification-bell.tsx` yet — just remove all usages. It will be dead code that can be cleaned up later (or the file can be deleted in this task if preferred — Claude's discretion).

Check if `components/layout/page-header.tsx` references NotificationBell or notificationCounts. If so, remove those references too.
  </action>
  <verify>
Run `pnpm typecheck` — should pass.
Run `pnpm lint` — should pass.
Grep for "NotificationBell" and "notificationCounts" to ensure all usages removed (only the component file itself and import should remain).
  </verify>
  <done>NotificationBell removed from sidebar and header (DN-02). Dashboard nav item shows badge with combined count (DN-01). No notification bell rendered anywhere in the app.</done>
</task>

<task type="auto">
  <name>Task 2: Create Getting Started right panel component and suppress pill/drawer on dashboard</name>
  <files>components/dashboard/right-panel-getting-started.tsx, components/onboarding/setup-progress.tsx, components/dashboard/welcome-card.tsx</files>
  <action>
**Create `components/dashboard/right-panel-getting-started.tsx` (GS-01, GS-02):**

A 'use client' component that renders Getting Started content inside the right panel.

Two modes based on setup progress:
1. **Full card** (before first job completed — `items.first_job_added === false`):
   - Title: "Getting Started" with Sparkle icon (same as WelcomeCard)
   - Subtitle: "Complete these steps to start collecting reviews automatically."
   - Renders the CHECKLIST_ITEMS as a vertical list (not 2-column grid — panel is narrow ~360px)
   - Each item: checkbox circle (CheckCircle if complete, Circle if not), title, description, link arrow
   - Same styling patterns as WelcomeCard but in a vertical list layout suited to 360px width

2. **Compact card** (after first job but before first review — `items.first_job_added === true && items.first_review_click === false`):
   - Smaller version: just show incomplete items as a mini-checklist
   - Title: "Almost there!" with smaller Sparkle icon
   - Only show the remaining incomplete items
   - More compact padding (p-3 instead of p-6)

3. **Hidden** (all items complete or user has first review):
   - Return null — don't render anything

Props: `{ items: Record<ChecklistItemId, boolean> }`
Import CHECKLIST_ITEMS and ChecklistItemId from `@/lib/constants/checklist`

Export: `RightPanelGettingStarted`

**Modify `components/onboarding/setup-progress.tsx` (GS-03):**

Suppress the setup progress pill and drawer on the dashboard page:
- The component already suppresses on dashboard when `completedCount === 0` (line 53-56)
- Extend this: suppress on dashboard ALWAYS (not just when completedCount === 0)
- Change the condition from `if (pathname === '/dashboard' && completedCount === 0)` to `if (pathname === '/dashboard')`
- This means the pill + drawer will still render on non-dashboard pages (/jobs, /campaigns, etc.) but NOT on the dashboard where Getting Started is now in the right panel

**Note about WelcomeCard:** The existing WelcomeCard in dashboard/page.tsx will be replaced by the right panel Getting Started in Plan 02's dashboard page refactor (40-02). That plan removes WelcomeCard from the left column. This plan creates the right panel replacement. The WelcomeCard component file itself stays (it might be used elsewhere in the future) but its dashboard rendering moves to the right panel. Since Plan 02 handles the dashboard page modifications, the actual integration of RightPanelGettingStarted into DashboardShell will happen when Plan 02 is executed (or in Plan 04 if 02 doesn't include it — the component is ready either way).
  </action>
  <verify>
Run `pnpm typecheck` — should pass.
Run `pnpm lint` — should pass.
Verify setup-progress.tsx suppresses pill on dashboard page.
Verify right-panel-getting-started.tsx exports component with full and compact modes.
  </verify>
  <done>Getting Started right panel component created with full/compact modes (GS-01, GS-02). Setup progress pill suppressed on dashboard (GS-03). NotificationBell removed, dashboard badge active.</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. `pnpm lint` passes
3. No references to NotificationBell in sidebar or app-shell (except the dead component file)
4. Dashboard nav item shows badge count
5. Setup progress pill does not render on /dashboard
6. RightPanelGettingStarted component exists with full and compact modes
</verification>

<success_criteria>
- DN-01: Dashboard nav badge shows combined count
- DN-02: NotificationBell removed from app
- GS-01: Getting Started full card component ready for right panel
- GS-02: Getting Started compact card component ready for right panel
- GS-03: Pill and drawer suppressed on dashboard page
</success_criteria>

<output>
After completion, create `.planning/phases/40-dashboard-command-center/40-03-SUMMARY.md`
</output>
