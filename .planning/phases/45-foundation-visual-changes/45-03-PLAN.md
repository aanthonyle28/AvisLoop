---
phase: 45
plan: 45-03
title: "Queue row card styling, empty state solid borders, Add Jobs drawer trigger"
wave: 2
depends_on: [45-01]
files_modified:
  - components/dashboard/ready-to-send-queue.tsx
  - components/dashboard/attention-alerts.tsx
autonomous: true
requirements: [DQ-01, DQ-02, DQ-03, DQ-04]
---

## Objective

Change the Ready to Send and Needs Attention queue rows from flat `divide-y` rows to individual white card units with rounded borders. Fix the empty states to use solid borders with white backgrounds. Wire the Ready to Send empty state "Add Jobs" button to open the Add Job drawer directly instead of navigating to `/jobs`.

## Context

@components/dashboard/ready-to-send-queue.tsx — queue row container (line 508), no-history empty state (lines 489-504), skeleton (lines 839-873)
@components/dashboard/attention-alerts.tsx — alert row container (line 223), empty state (lines 214-220), skeleton (lines 260-273)
@components/jobs/add-job-provider.tsx — `useAddJob()` hook returning `{ openAddJob }`
@app/(dashboard)/layout.tsx — `AddJobProvider` wraps all dashboard children (hook is safe to call)
@.planning/phases/45-foundation-visual-changes/45-RESEARCH.md — pitfall notes on two empty states and skeleton sync

## Tasks

<task id="1">
### DQ-01: Card-style rows in Ready to Send queue

In `components/dashboard/ready-to-send-queue.tsx`:

**1a. Live row container (line 508):**

Change the container from `divide-y` to `space-y-2`:
```tsx
// OLD
<div className="divide-y divide-border">
// NEW
<div className="space-y-2">
```

**1b. Each row div (lines 514-520):**

Add `rounded-lg border border-border` to each row and change the background logic.

**Padding note:** The live row outer div intentionally has NO padding. Padding is provided by child elements: the left `<button>` has `py-2.5 pl-3 pr-1` and the right actions `<div>` has `pr-3`. This is correct because the left side must be a full-height clickable `<button>` — padding on the outer div would create dead click space. The skeleton rows use `py-2.5 px-3` directly on the outer div since they have no interactive children. Both approaches produce the same visual spacing.

```tsx
// OLD
<div
  key={job.id}
  className={cn(
    'flex items-center justify-between transition-colors',
    isSelected ? 'bg-muted' : 'hover:bg-muted/50',
  )}
>
// NEW
<div
  key={job.id}
  className={cn(
    'flex items-center justify-between transition-colors rounded-lg border border-border',
    isSelected ? 'bg-muted' : 'bg-card hover:bg-muted/50',
  )}
>
```

Do NOT add padding to this outer div — children already provide it.

**1c. Skeleton container (`ReadyToSendQueueSkeleton`, line 851):**

Change skeleton container from `divide-y` to `space-y-2`:
```tsx
// OLD
<div className="divide-y divide-border">
// NEW
<div className="space-y-2">
```

And add card styling to each skeleton row div (line 853-855):
```tsx
// OLD
className="flex items-center justify-between py-2.5 px-3 rounded-md"
// NEW
className="flex items-center justify-between py-2.5 px-3 rounded-lg border border-border bg-card"
```

**Verification:** The live queue rows and skeleton rows both render as individual card units with `rounded-lg border border-border`. No `divide-y` remains on the job list container or skeleton container within `ReadyToSendQueueSkeleton`.
</task>

<task id="2">
### DQ-01 (Attention): Card-style rows in Needs Attention queue

In `components/dashboard/attention-alerts.tsx`:

**2a. Live alert row container (line 223):**

Change from `divide-y` to `space-y-2`:
```tsx
// OLD
<div className="divide-y divide-border">
// NEW
<div className="space-y-2">
```

**2b. AlertRow outer div (line 78-82 in the `AlertRow` function):**

Add `rounded-lg border border-border` and change background:
```tsx
// OLD
className={cn(
  'flex items-start justify-between gap-3 px-3 py-2.5 cursor-pointer transition-colors',
  isSelected ? 'bg-muted' : 'hover:bg-muted/50',
)}
// NEW
className={cn(
  'flex items-start justify-between gap-3 px-3 py-2.5 cursor-pointer transition-colors rounded-lg border border-border',
  isSelected ? 'bg-muted' : 'bg-card hover:bg-muted/50',
)}
```

**2c. Skeleton container (`AttentionAlertsSkeleton`, line 260):**

Change from `divide-y` to `space-y-2`:
```tsx
// OLD
<div className="divide-y divide-border">
// NEW
<div className="space-y-2">
```

And add card styling to each skeleton row div (line 262):
```tsx
// OLD
className="flex items-start justify-between gap-3 rounded-md px-3 py-2.5"
// NEW
className="flex items-start justify-between gap-3 rounded-lg border border-border bg-card px-3 py-2.5"
```

**Verification:** Alert rows and their skeleton both render as individual cards. No `divide-y` remains on the alert list container or `AttentionAlertsSkeleton`.
</task>

<task id="3">
### DQ-02 + DQ-04: Ready to Send empty state — solid border + Add Jobs drawer trigger

In `components/dashboard/ready-to-send-queue.tsx`:

**3a. Import `useAddJob` at the top of the file:**

The `ReadyToSendQueue` component needs access to `openAddJob`. Add the import if not already present:
```tsx
import { useAddJob } from '@/components/jobs/add-job-provider'
```

**3b. Call `useAddJob()` inside the `ReadyToSendQueue` function body:**

Add near the top of the function, alongside other hooks:
```tsx
const { openAddJob } = useAddJob()
```

**3c. Fix the no-history empty state (lines 489-504):**

Change from dashed border to solid border with white background (DQ-02), and replace the Link-based button with an onClick button that opens the Add Job drawer (DQ-04):

```tsx
// OLD (lines 489-504)
{jobs.length === 0 && !hasJobHistory && (
  <div className="flex flex-col items-center justify-center py-8 text-center rounded-lg border-2 border-dashed border-border">
    <div className="rounded-full bg-muted p-3 mb-3">
      <Briefcase className="h-6 w-6 text-muted-foreground" />
    </div>
    <p className="text-sm text-muted-foreground mb-3">
      No jobs yet — add a completed job to get started
    </p>
    <Button asChild size="sm">
      <Link href="/jobs">
        <Plus className="h-4 w-4 mr-1" />
        Add Job
      </Link>
    </Button>
  </div>
)}

// NEW
{jobs.length === 0 && !hasJobHistory && (
  <div className="flex flex-col items-center justify-center py-8 text-center rounded-lg border border-border bg-card">
    <div className="rounded-full bg-muted p-3 mb-3">
      <Briefcase className="h-6 w-6 text-muted-foreground" />
    </div>
    <p className="text-sm text-muted-foreground mb-3">
      No jobs yet — add a completed job to get started
    </p>
    <Button size="sm" onClick={openAddJob}>
      <Plus className="h-4 w-4 mr-1" />
      Add Jobs
    </Button>
  </div>
)}
```

Key changes:
- `border-2 border-dashed border-border` replaced with `border border-border bg-card` (DQ-02)
- `<Button asChild size="sm"><Link href="/jobs">` replaced with `<Button size="sm" onClick={openAddJob}>` (DQ-04)
- `asChild` prop removed (no longer wrapping a Link)
- Button text changed from "Add Job" to "Add Jobs" (plural, per requirement)

**IMPORTANT:** Do NOT touch the `hasJobHistory` empty state (lines 480-487) — that "All caught up" state keeps its current styling.

**3d. Remove the `Link` import if it becomes unused:**

After this change, check if `Link` from `next/link` is still used elsewhere in the file. If not, remove the import to avoid lint warnings. (It IS still used on line 754-758 for "Show all" link, so keep it.)

**Verification:** The no-history empty state has `border border-border bg-card` (no `border-dashed`). The "Add Jobs" button calls `openAddJob` onClick (no `<Link>` or `href`). The `useAddJob` import and hook call are present.
</task>

<task id="4">
### DQ-03: Needs Attention empty state — solid border with white background

In `components/dashboard/attention-alerts.tsx`, lines 214-220:

```tsx
// OLD
<div className="flex items-center gap-3 py-8 text-center justify-center">
  <CheckCircle weight="fill" className="size-5 text-success" />
  <p className="text-sm text-muted-foreground">
    No issues — everything is running smoothly
  </p>
</div>

// NEW
<div className="flex items-center gap-3 py-8 text-center justify-center rounded-lg border border-border bg-card">
  <CheckCircle weight="fill" className="size-5 text-success" />
  <p className="text-sm text-muted-foreground">
    No issues — everything is running smoothly
  </p>
</div>
```

Only add `rounded-lg border border-border bg-card` to the existing class list. Content inside stays the same.

**Verification:** The Needs Attention empty state renders with `rounded-lg border border-border bg-card`.
</task>

## Verification

```bash
pnpm typecheck   # must pass
pnpm lint        # must pass
```

### must_haves (goal-backward from phase success criteria)

- [ ] Ready to Send queue rows use `space-y-2` container + `rounded-lg border border-border bg-card` per row (not `divide-y`)
- [ ] Needs Attention queue rows use `space-y-2` container + `rounded-lg border border-border bg-card` per row (not `divide-y`)
- [ ] Ready to Send no-history empty state uses `border border-border bg-card` (no `border-dashed`, no `border-2`)
- [ ] Needs Attention displays a bordered white card when no issues are present (no bare text floating without a container)
- [ ] Ready to Send no-history empty state "Add Jobs" button calls `openAddJob()` onClick (not `<Link href="/jobs">`)
- [ ] `ReadyToSendQueueSkeleton` rows match card pattern (`space-y-2` + `rounded-lg border border-border bg-card`)
- [ ] `AttentionAlertsSkeleton` rows match card pattern (`space-y-2` + `rounded-lg border border-border bg-card`)
- [ ] `pnpm typecheck` passes
- [ ] `pnpm lint` passes
