---
phase: 18-code-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/marketing/how-it-works.tsx
  - app/(dashboard)/send/page.tsx
  - .planning/phases/13-scheduling-and-navigation/13-VERIFICATION.md
autonomous: true

must_haves:
  truths:
    - "components/marketing/how-it-works.tsx no longer exists on disk"
    - "send/page.tsx uses CONTACT_LIMITS imported from lib/constants/billing.ts"
    - "Phase 13 VERIFICATION.md status reflects that navigation gaps have been resolved"
  artifacts:
    - path: "app/(dashboard)/send/page.tsx"
      provides: "CONTACT_LIMITS import from billing constants"
      contains: "import.*CONTACT_LIMITS.*from.*lib/constants/billing"
    - path: ".planning/phases/13-scheduling-and-navigation/13-VERIFICATION.md"
      provides: "Updated verification status"
      contains: "status: resolved"
  key_links:
    - from: "app/(dashboard)/send/page.tsx"
      to: "lib/constants/billing.ts"
      via: "named import CONTACT_LIMITS"
      pattern: "import.*CONTACT_LIMITS.*billing"
---

<objective>
Delete orphaned marketing component, replace inline CONTACT_LIMITS with import from billing constants, and update Phase 13 VERIFICATION.md to reflect that navigation gaps were resolved in later phases.

Purpose: Close 3 of 4 tech debt items identified in the v1.2.1 milestone audit.
Output: Cleaner codebase with single source of truth for billing constants and accurate verification records.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@lib/constants/billing.ts
@app/(dashboard)/send/page.tsx
@.planning/phases/13-scheduling-and-navigation/13-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete orphaned file and fix inline constant</name>
  <files>
    components/marketing/how-it-works.tsx
    app/(dashboard)/send/page.tsx
  </files>
  <action>
1. Delete `components/marketing/how-it-works.tsx` — this file is not imported anywhere in the app (confirmed by grep). Simply remove it.

2. In `app/(dashboard)/send/page.tsx`:
   - Add import at top: `import { CONTACT_LIMITS } from '@/lib/constants/billing'`
   - Remove the inline definition on lines 53-58:
     ```
     const CONTACT_LIMITS: Record<string, number | undefined> = {
       trial: undefined,
       basic: 200,
       pro: undefined,
     }
     ```
   - Keep the existing `const contactLimit = CONTACT_LIMITS[usage.tier]` on line 59 — it will now use the imported constant.

The values are identical between the inline definition and `lib/constants/billing.ts` (trial: undefined, basic: 200, pro: undefined), so this is a safe replacement.
  </action>
  <verify>
- `components/marketing/how-it-works.tsx` does not exist: `ls components/marketing/how-it-works.tsx` should fail
- `grep "CONTACT_LIMITS" app/(dashboard)/send/page.tsx` shows import line and usage line, NOT inline definition
- `pnpm typecheck` passes (import resolves correctly)
  </verify>
  <done>
Orphaned file deleted. send/page.tsx imports CONTACT_LIMITS from lib/constants/billing.ts with no inline duplicate.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Phase 13 VERIFICATION.md to resolved status</name>
  <files>
    .planning/phases/13-scheduling-and-navigation/13-VERIFICATION.md
  </files>
  <action>
Update `.planning/phases/13-scheduling-and-navigation/13-VERIFICATION.md` to reflect that all gaps have been resolved in subsequent phases:

1. Change frontmatter:
   - `status: gaps_found` → `status: resolved`
   - `score: 3/5 must-haves verified` → `score: 5/5 must-haves verified`
   - Add `resolved_by: "Phase 15 (15-02-PLAN.md) redesigned sidebar and bottom nav"` to frontmatter
   - Update gaps section to mark each gap as resolved

2. In the body, update Truth #4 row from FAILED to VERIFIED with evidence:
   - sidebar.tsx line 37: mainNav array includes Scheduled item with CalendarDots icon
   - bottom-nav.tsx line 14: items array includes Scheduled item
   - bottom-nav.tsx line 31: grid-cols-5 is correct

3. Update the Key Link Verification table: change sidebar.tsx and bottom-nav.tsx rows from "NOT WIRED" to "WIRED"

4. Update Requirements Coverage: NAV-01 from BLOCKED to SATISFIED

5. Update Anti-Patterns Found: mark all three items as RESOLVED

6. Update the Gaps Summary section to note resolution:
   - Add header: "**Resolution (Phase 18 audit):** All gaps resolved by Phase 15 sidebar/nav redesign (15-02-PLAN.md)"
   - Note that sidebar mainNav now has 5 items including Scheduled
   - Note that bottom-nav items now includes Scheduled with grid-cols-5

Keep the original gap documentation intact for audit trail — append resolution notes rather than deleting gap descriptions.
  </action>
  <verify>
- `grep "status: resolved" .planning/phases/13-scheduling-and-navigation/13-VERIFICATION.md` returns a match
- `grep "5/5" .planning/phases/13-scheduling-and-navigation/13-VERIFICATION.md` returns a match
  </verify>
  <done>
Phase 13 VERIFICATION.md accurately reflects that all 5 truths are verified and navigation gaps were resolved by Phase 15 sidebar redesign.
  </done>
</task>

</tasks>

<verification>
1. `ls components/marketing/how-it-works.tsx` → file not found
2. `grep -n "CONTACT_LIMITS" app/(dashboard)/send/page.tsx` → shows import line and usage line only
3. `grep "from.*billing" app/(dashboard)/send/page.tsx` → shows import from `@/lib/constants/billing`
4. `pnpm typecheck` → passes
5. `pnpm lint` → passes
6. Phase 13 VERIFICATION.md has `status: resolved` and `score: 5/5`
</verification>

<success_criteria>
- components/marketing/how-it-works.tsx deleted
- send/page.tsx imports CONTACT_LIMITS from lib/constants/billing.ts (no inline definition)
- Phase 13 VERIFICATION.md status is resolved with 5/5 score
- Lint and typecheck pass
</success_criteria>

<output>
After completion, create `.planning/phases/18-code-cleanup/18-01-SUMMARY.md`
</output>
