---
phase: 38-onboarding-consolidation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/onboarding/steps/services-offered-step.tsx
  - components/onboarding/steps/campaign-preset-step.tsx
  - lib/constants/campaigns.ts
autonomous: true

must_haves:
  truths:
    - "Service type options display as horizontal pill-shaped chips in a flex-wrap layout, not a 2-column card grid"
    - "Selecting 'Other' reveals a text input for custom service name"
    - "Campaign preset cards show 'Gentle Follow-Up', 'Steady Follow-Up', 'Speedy Follow-Up' — not Conservative/Standard/Aggressive"
    - "Campaign preset descriptions use plain English with no mention of 'multi-touch sequence' or 'touch #1/2/3'"
    - "Touch timing visualization shows 'Day 1', 'Day 3' etc. instead of raw '24h', '72h'"
  artifacts:
    - path: "components/onboarding/steps/services-offered-step.tsx"
      provides: "Horizontal chip tiles with Other text input"
      contains: "rounded-full"
    - path: "components/onboarding/steps/campaign-preset-step.tsx"
      provides: "Plain-English preset names in UI"
      contains: "Gentle Follow-Up"
    - path: "lib/constants/campaigns.ts"
      provides: "Updated display names and descriptions"
      contains: "Gentle Follow-Up"
  key_links:
    - from: "components/onboarding/steps/campaign-preset-step.tsx"
      to: "lib/constants/campaigns.ts"
      via: "CAMPAIGN_PRESETS imported for display names"
      pattern: "import.*CAMPAIGN_PRESETS"
---

<objective>
Change the services step from vertical card-grid to horizontal selectable chips with "Other" text input reveal, and replace technical campaign preset labels (Conservative/Standard/Aggressive) with plain-English names (Gentle/Steady/Speedy Follow-Up) and jargon-free descriptions.

Purpose: Horizontal chips feel lighter and faster for a multi-select. Plain-English preset names remove intimidation — "Gentle Follow-Up" is immediately understandable while "Conservative (Email Only)" requires domain knowledge.

Output: Redesigned services step UI, updated preset constants, updated preset step rendering.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/38-onboarding-consolidation/38-RESEARCH.md
@components/onboarding/steps/services-offered-step.tsx
@components/onboarding/steps/campaign-preset-step.tsx
@lib/constants/campaigns.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Horizontal chip tiles with "Other" text input</name>
  <files>components/onboarding/steps/services-offered-step.tsx</files>
  <action>
  Rewrite the service type selection UI in `services-offered-step.tsx`:

  1. **Add state for custom service label:**
  ```typescript
  const [customServiceLabel, setCustomServiceLabel] = useState('')
  ```
  Import `Input` from `@/components/ui/input` and `Label` from `@/components/ui/label`.

  2. **Replace the grid layout** (the `<div className="grid grid-cols-1 md:grid-cols-2 gap-4">` block) with a horizontal chip layout:
  ```tsx
  <div className="flex flex-wrap gap-2">
    {SERVICE_TYPES.map((serviceType) => {
      const isSelected = selected.includes(serviceType)
      const label = SERVICE_TYPE_LABELS[serviceType]
      return (
        <button
          key={serviceType}
          type="button"
          onClick={() => handleToggle(serviceType)}
          className={cn(
            'inline-flex items-center gap-1.5 px-4 py-2 rounded-full border text-sm font-medium transition-colors',
            isSelected
              ? 'bg-primary text-primary-foreground border-primary'
              : 'bg-background border-border hover:border-primary/50 text-foreground'
          )}
        >
          {isSelected && <Check size={14} weight="bold" />}
          {label}
        </button>
      )
    })}
  </div>
  ```

  3. **Add "Other" text input reveal** immediately after the chips div:
  ```tsx
  {selected.includes('other') && (
    <div className="space-y-1.5">
      <Label htmlFor="custom-service">What type of service? (optional)</Label>
      <Input
        id="custom-service"
        value={customServiceLabel}
        onChange={(e) => setCustomServiceLabel(e.target.value)}
        placeholder="e.g. Pest Control, Pool Cleaning..."
      />
    </div>
  )}
  ```

  4. Import `cn` from `@/lib/utils` (if not already imported).

  5. **Remove the timing display** from each chip. The old card showed "Review request: Xh after job" — this is too much detail for chip-sized elements. The timing info is not needed in the onboarding step.

  **Important:** The `customServiceLabel` state is for UX only (so users feel heard when selecting "Other"). It does NOT get saved to the database in Phase 38. The value sent to `saveServicesOffered` remains the `selected` array of enum strings. The custom label can be persisted in a future phase if a `custom_service_label` column is added to the business table.

  The form submission logic (`handleSubmit`) and the error display below the chips remain unchanged.
  </action>
  <verify>Run `pnpm typecheck` — verify no errors. Check that `rounded-full` appears in the component (chip style). Check that `grid-cols-1 md:grid-cols-2` is NOT present (old grid removed). Check that "custom-service" input is conditionally rendered when "other" is selected.</verify>
  <done>Services step shows horizontal pill-shaped chips with rounded-full styling. Selecting "Other" reveals a text input. No vertical card grid remains. Timing hours NOT shown on individual chips.</done>
</task>

<task type="auto">
  <name>Task 2: Plain-English preset names and descriptions</name>
  <files>lib/constants/campaigns.ts, components/onboarding/steps/campaign-preset-step.tsx</files>
  <action>
  **In `lib/constants/campaigns.ts`:**

  Update the `CAMPAIGN_PRESETS` array display names and descriptions. Keep the `id` values unchanged (`conservative`, `standard`, `aggressive`) since these are used for matching logic:

  ```typescript
  export const CAMPAIGN_PRESETS: CampaignPreset[] = [
    {
      id: 'conservative',
      name: 'Gentle Follow-Up',
      description: 'Two emails over 3 days. Good for established relationships or high-ticket services.',
      touches: [
        { touch_number: 1, channel: 'email', delay_hours: 24 },
        { touch_number: 2, channel: 'email', delay_hours: 72 },
      ],
      recommended_for: ['hvac', 'plumbing', 'electrical', 'roofing'],
    },
    {
      id: 'standard',
      name: 'Steady Follow-Up',
      description: 'Two emails and a text message over 7 days. Works well for most businesses.',
      touches: [
        { touch_number: 1, channel: 'email', delay_hours: 24 },
        { touch_number: 2, channel: 'email', delay_hours: 72 },
        { touch_number: 3, channel: 'sms', delay_hours: 168 },
      ],
      recommended_for: ['painting', 'handyman', 'other'],
    },
    {
      id: 'aggressive',
      name: 'Speedy Follow-Up',
      description: 'A text within hours, then email and SMS reminders. Best for quick-turnaround services like cleaning.',
      touches: [
        { touch_number: 1, channel: 'sms', delay_hours: 4 },
        { touch_number: 2, channel: 'email', delay_hours: 24 },
        { touch_number: 3, channel: 'sms', delay_hours: 72 },
        { touch_number: 4, channel: 'email', delay_hours: 168 },
      ],
      recommended_for: ['cleaning'],
    },
  ]
  ```

  Note: The database preset names (`'Conservative (Email Only)'` etc.) do NOT change. Only the display constants change. The matching logic in `campaign-preset-step.tsx` uses `preset.name.toLowerCase().includes(p.id)` where `p.id` is `'conservative'`/`'standard'`/`'aggressive'` — these IDs are unchanged, so matching still works.

  **In `campaign-preset-step.tsx`:**

  1. **Replace the hardcoded preset title rendering** (lines 86-89). Instead of:
  ```tsx
  {preset.meta?.id === 'conservative' && 'Conservative'}
  {preset.meta?.id === 'standard' && 'Standard'}
  {preset.meta?.id === 'aggressive' && 'Aggressive'}
  {!preset.meta && preset.name}
  ```
  Use:
  ```tsx
  {preset.meta?.name || preset.name}
  ```
  This displays the `name` field from CAMPAIGN_PRESETS (now "Gentle Follow-Up" etc.), falling back to the DB preset name if no meta match.

  2. **Update touch timing display** from raw hours to human-readable days. Replace the Badge span content (line 112-115):
  ```tsx
  <span className="text-xs">
    {touch.delay_hours < 24
      ? `${touch.delay_hours}h`
      : `${Math.round(touch.delay_hours / 24)}d`}
  </span>
  ```
  With cumulative day labels. Compute cumulative hours for each touch, then render as "Day N":
  ```tsx
  <span className="text-xs">
    {(() => {
      // Compute cumulative hours up to this touch
      const cumulativeHours = preset.campaign_touches
        .slice(0, idx + 1)
        .reduce((sum, t) => sum + t.delay_hours, 0)
      if (cumulativeHours < 24) return `${cumulativeHours}h`
      return `Day ${Math.round(cumulativeHours / 24)}`
    })()}
  </span>
  ```

  3. **Keep the channel icons** (EnvelopeSimple / ChatCircle) — these are intuitive and not jargon.

  4. **Verify no technical language remains**: Ensure "multi-touch sequence", "touch #1/2/3", "Fast", "Standard", "Slow" do NOT appear in the component text.
  </action>
  <verify>Run `pnpm typecheck` and `pnpm lint`. Grep `campaigns.ts` for `'Gentle Follow-Up'` — must exist. Grep `campaign-preset-step.tsx` for `'Conservative'` or `'Standard'` or `'Aggressive'` (as standalone display strings) — must be zero hits. Grep for `multi-touch` or `touch #` — must be zero hits across both files. Verify cumulative day labels render correctly for all 3 presets: Gentle Follow-Up should show Day 1, Day 4; Steady Follow-Up: Day 1, Day 4, Day 11; Speedy Follow-Up: 4h, Day 1, Day 4, Day 11.</verify>
  <done>CAMPAIGN_PRESETS constant shows 'Gentle Follow-Up', 'Steady Follow-Up', 'Speedy Follow-Up' with plain-English descriptions. Preset step renders these names (not hardcoded Conservative/Standard/Aggressive). Touch timing shows cumulative day labels (Day 1, Day 3, Day 7). No technical jargon in UI copy.</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. `pnpm lint` passes
3. Services step uses `flex flex-wrap` layout with `rounded-full` chips (not grid)
4. "Other" selection reveals text input with id="custom-service"
5. Campaign presets display "Gentle Follow-Up", "Steady Follow-Up", "Speedy Follow-Up"
6. No "Conservative", "Standard", "Aggressive" visible in UI rendering
7. Touch timing shows "Day 1", "Day 3", etc. instead of "24h", "72h"
</verification>

<success_criteria>
- Services step is horizontal chip tiles (flex-wrap, rounded-full), not card grid
- "Other" reveals text input for custom service name
- Campaign presets use plain-English names in constants and UI
- No technical jargon (multi-touch, touch #N, Conservative/Standard/Aggressive) in preset step
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/38-onboarding-consolidation/38-02-SUMMARY.md`
</output>
