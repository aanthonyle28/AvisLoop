---
phase: 32-post-onboarding-guidance
plan: 04
type: execute
wave: 3
depends_on: ["32-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Dashboard checklist displays correctly for new users"
    - "Checklist progress updates as items are completed"
    - "Checklist dismiss works and persists"
    - "Checklist auto-collapses after 3 days"
    - "Checklist collapse/expand toggle works"
    - "Jobs page tooltip hint shows on first visit"
    - "Campaigns page tooltip hint shows on first visit"
    - "Tooltip hints do not show on subsequent visits"
    - "All features work in light and dark mode"
---

<objective>
Visual verification checkpoint for the post-onboarding guidance feature. Verify the checklist and tooltip hints work correctly across modes and states.

Purpose: Ensure all requirements (GUIDE-01 through GUIDE-06) are satisfied before marking phase complete.
Output: Verification that checklist and hints work as specified.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/32-post-onboarding-guidance/32-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Post-onboarding guidance feature with two components:

1. **Getting Started Checklist** (Dashboard)
   - Persistent card tracking 4 milestones:
     - Add your first job
     - Review your campaign
     - Complete a job
     - Get your first review click
   - Auto-detects completion from actual data
   - Progress bar showing X of 4 complete
   - Items link to relevant pages
   - Collapsible (caret toggle) - shows header only when collapsed
   - Auto-collapses after 3 days (tracks first_seen_at)
   - Dismissible via X button (hides permanently)
   - Congratulations message when all complete
   - State persisted in database

2. **First-Visit Tooltip Hints** (Jobs + Campaigns pages)
   - Jobs: Tooltip pointing at Add Job button
   - Campaigns: Tooltip explaining automation
   - Shows once per user per page (localStorage)
   - Dismissible via "Got it" button
   - V2-aligned messaging
  </what-built>
  <how-to-verify>
**Pre-verification setup:**
1. Start dev server: `pnpm dev`
2. Apply migrations: `supabase db reset` (or ensure onboarding_checklist column exists)
3. Log in with a test account that has NO jobs, NO campaigns (fresh state)
4. Clear localStorage: DevTools > Application > Local Storage > delete `hint-*` keys

**Test 1: Checklist Visibility (GUIDE-01)**
1. Navigate to http://localhost:3000/dashboard
2. Expected: "Getting Started" checklist card visible at top of dashboard
3. Expected: Shows "0 of 4 complete" with empty progress bar

**Test 2: Checklist Items and Links (GUIDE-02, GUIDE-04)**
1. Verify 4 checklist items visible:
   - "Add your first job" -> /jobs?action=add
   - "Review your campaign" -> /campaigns
   - "Complete a job" -> /jobs
   - "Get your first review click" -> /analytics
2. Click each item, verify it navigates to correct page
3. Verify items show as incomplete (empty circle, no strikethrough)

**Test 3: Checklist Progress Auto-Detection**
1. Navigate to /jobs?action=add
2. Add a job (any customer, any service type, status: scheduled)
3. Return to /dashboard
4. Expected: "Add your first job" shows checkmark and strikethrough
5. Expected: Progress shows "1 of 4 complete", progress bar 25%

**Test 4: Campaign Detection**
1. If user completed onboarding with campaign preset, they should have a campaign
2. Navigate to /campaigns and verify campaign exists
3. Return to /dashboard
4. Expected: "Review your campaign" now complete (campaign exists from onboarding)
5. Expected: "2 of 4 complete", progress bar 50%

**Test 5: Job Completion Detection**
1. Go to /jobs
2. Mark the job as "Completed" (change status)
3. Return to /dashboard
4. Expected: "Complete a job" now complete
5. Expected: "3 of 4 complete", progress bar 75%

**Test 6: Checklist Collapse/Expand**
1. On dashboard, click the caret (collapse) button on checklist card
2. Expected: Checklist collapses to header only (title + progress bar visible)
3. Expected: Checklist items hidden
4. Click caret (expand) button
5. Expected: Checklist expands, items visible again
6. Refresh page - collapsed state should persist

**Test 7: Checklist Dismiss (GUIDE-04)**
1. On dashboard, click X button on checklist card
2. Expected: Checklist disappears
3. Refresh page (F5)
4. Expected: Checklist stays hidden (persisted to database)

**Test 8: Jobs Page Tooltip Hint (GUIDE-05, GUIDE-06)**
1. Clear localStorage hint keys: DevTools > Application > Local Storage > delete keys starting with `hint-`
2. Navigate to /jobs
3. Expected: Tooltip appears pointing at "Add Job" button after ~500ms
4. Expected: Tooltip shows "Add your first job here" title
5. Click "Got it" button
6. Expected: Tooltip dismisses

**Test 9: Jobs Hint Persistence (GUIDE-06)**
1. Navigate away from /jobs (go to /dashboard)
2. Navigate back to /jobs
3. Expected: Tooltip does NOT appear again (localStorage tracking)
4. Verify in DevTools: `hint-jobs-add-button-seen` key exists and is true

**Test 10: Campaigns Page Tooltip Hint**
1. Clear localStorage hint keys: DevTools > Application > Local Storage > delete keys starting with `hint-`
2. Navigate to /campaigns
3. Expected: Tooltip appears after ~500ms with automation message
4. Expected: Tooltip says "Review your campaign settings" or similar
5. Click "Got it" button
6. Expected: Tooltip dismisses
7. Navigate away and back - tooltip should NOT appear again

**Test 11: Dark Mode**
1. Toggle to dark mode (account menu > theme or system toggle)
2. Navigate to /dashboard
3. Expected: Checklist card has correct dark mode styling
4. Navigate to /jobs, clear localStorage hint key
5. Refresh page
6. Expected: Tooltip has correct dark mode styling

**Test 12: Mobile Viewport**
1. Open DevTools > Device toolbar > set width to 375px (iPhone)
2. Navigate to /dashboard
3. Expected: Checklist card responsive, text readable
4. Navigate to /jobs
5. Expected: Tooltip positions correctly, doesn't overflow

**Test 13: Congratulations State**
1. If all 4 items are complete, verify dashboard shows green congratulations card
2. Verify card has "You're all set!" message
3. Verify dismiss (X) button works

**Test 14: Review Click Detection (optional)**
1. This requires a customer clicking through the review funnel with 4-5 stars
2. If testable: After review click, return to dashboard
3. Expected: "Get your first review click" shows complete
  </how-to-verify>
  <resume-signal>
Type "approved" if all 14 tests pass (or 12 if Tests 13-14 skipped).

If issues found, describe:
- Which test failed
- What the expected vs actual behavior was
- Screenshots if relevant

Note:
- Test 13 (congratulations state) requires all items complete
- Test 14 (review click) requires full funnel completion
These tests can be skipped if difficult to replicate in dev environment.
  </resume-signal>
</task>

</tasks>

<verification>
Human verification of all requirements:
- GUIDE-01: Dashboard "Getting Started" checklist card visible for new users
- GUIDE-02: Checklist tracks: Add first job, Review campaign, Complete a job, Get first review click
- GUIDE-03: Checklist progress persists in database (survives refresh/logout)
- GUIDE-04: Checklist dismissible by user, congratulations when complete
- GUIDE-05: Checklist auto-collapses after 3 days, collapse/expand toggle works
- GUIDE-06: Jobs page tooltip hint on first visit pointing at Add Job button
- GUIDE-07: Campaigns page tooltip hint on first visit
- GUIDE-08: Tooltip hints show once per user per page (localStorage)
</verification>

<success_criteria>
All 14 manual tests pass (or 12 if Tests 13-14 skipped):
1. Checklist visible for new users on dashboard
2. Checklist items link to correct pages
3. Checklist progress updates as items completed
4. Campaign reviewed item detects active campaign
5. Checklist progress updates for job completion
6. Checklist collapse/expand works and persists
7. Checklist dismiss works and persists
8. Jobs page tooltip shows on first visit
9. Jobs hint doesn't show on subsequent visits
10. Campaigns page tooltip shows on first visit
11. Dark mode styling correct
12. Mobile responsive
13. Congratulations state works (optional)
14. Review click detection works (optional)
</success_criteria>

<output>
After approval, create `.planning/phases/32-post-onboarding-guidance/32-04-SUMMARY.md` documenting verification results.
</output>
