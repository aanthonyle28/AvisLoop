---
phase: 16-onboarding-redesign
plan: 03
type: execute
wave: 2
depends_on: ["16-01"]
files_modified:
  - components/auth/auth-split-layout.tsx
  - app/auth/login/page.tsx
  - app/auth/sign-up/page.tsx
  - components/login-form.tsx
  - components/sign-up-form.tsx
autonomous: true

must_haves:
  truths:
    - "Login page uses split layout with form on left and image on right"
    - "Signup page uses same split layout with form on left and image on right"
    - "Both pages show Google OAuth button below email/password form with OR divider"
    - "Right side image is hidden on mobile (single column form only)"
  artifacts:
    - path: "components/auth/auth-split-layout.tsx"
      provides: "Reusable split layout for auth pages"
      contains: "grid-cols-1 lg:grid-cols-2"
    - path: "app/auth/login/page.tsx"
      provides: "Redesigned login page"
      contains: "AuthSplitLayout"
    - path: "app/auth/sign-up/page.tsx"
      provides: "Redesigned signup page"
      contains: "AuthSplitLayout"
    - path: "components/login-form.tsx"
      provides: "Login form with Google OAuth button"
      contains: "GoogleOAuthButton"
    - path: "components/sign-up-form.tsx"
      provides: "Signup form with Google OAuth button"
      contains: "GoogleOAuthButton"
  key_links:
    - from: "app/auth/login/page.tsx"
      to: "components/auth/auth-split-layout.tsx"
      via: "AuthSplitLayout wrapper"
      pattern: "AuthSplitLayout"
    - from: "components/login-form.tsx"
      to: "components/auth/google-oauth-button.tsx"
      via: "GoogleOAuthButton below form"
      pattern: "GoogleOAuthButton"
---

<objective>
Redesign login and signup pages with split layout (form left, image right) and add Google OAuth button with "OR CONTINUE WITH" divider below the email/password forms.

Purpose: Modern auth page design with Google OAuth as a prominent sign-in option alongside email/password. Split layout provides visual interest on desktop while remaining clean on mobile.

Output: Reusable AuthSplitLayout component, redesigned login and signup pages with Google OAuth integration.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/16-onboarding-redesign/16-CONTEXT.md
@.planning/phases/16-onboarding-redesign/16-RESEARCH.md
@app/auth/login/page.tsx
@app/auth/sign-up/page.tsx
@components/login-form.tsx
@components/sign-up-form.tsx
@components/auth/google-oauth-button.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AuthSplitLayout and redesign auth pages</name>
  <files>components/auth/auth-split-layout.tsx, app/auth/login/page.tsx, app/auth/sign-up/page.tsx</files>
  <action>
**A. Create `components/auth/auth-split-layout.tsx`:**

Server component (no 'use client' needed -- it just renders HTML/children):

```tsx
import Image from 'next/image'
import Link from 'next/link'

export function AuthSplitLayout({
  children,
  imageSrc = '/images/auth-hero.png',
  imageAlt = 'AvisLoop dashboard preview',
}: {
  children: React.ReactNode
  imageSrc?: string
  imageAlt?: string
}) {
  return (
    <div className="grid min-h-screen grid-cols-1 lg:grid-cols-2">
      {/* Left: Form content */}
      <div className="flex flex-col">
        {/* Logo header */}
        <div className="p-6">
          <Link href="/" className="text-xl font-bold">
            AvisLoop
          </Link>
        </div>
        {/* Centered form area */}
        <div className="flex flex-1 items-center justify-center px-4 pb-12 sm:px-6 lg:px-16">
          <div className="w-full max-w-sm">
            {children}
          </div>
        </div>
      </div>

      {/* Right: Image (hidden on mobile) */}
      <div className="relative hidden lg:block bg-muted">
        <Image
          src={imageSrc}
          alt={imageAlt}
          fill
          className="object-cover"
          priority
        />
      </div>
    </div>
  )
}
```

- The image file `/images/auth-hero.png` may not exist yet. Use a placeholder approach: if the image doesn't exist, use a solid bg-muted with a centered text placeholder or just the muted background. Wrap Image in a try or use a div with bg-muted as fallback. Simplest: use a div with `bg-muted` background and centered placeholder text "Product Preview" or an inline SVG illustration. OR use `<img>` with onError fallback. Best approach: just use the `bg-muted` div with a decorative element for now since actual screenshots come later.
- Actually, use `next/image` with the `src` prop. If the image doesn't exist, Next.js will show a broken image. Instead, create a simple fallback: use a `<div>` with gradient/pattern background when no image is available. For now, just render a styled div:
  ```tsx
  <div className="relative hidden lg:block bg-gradient-to-br from-primary/5 via-primary/10 to-primary/5">
    <div className="flex h-full items-center justify-center p-12">
      <div className="text-center space-y-4">
        <div className="text-6xl font-bold text-primary/20">A</div>
        <p className="text-muted-foreground text-sm">Product Preview</p>
      </div>
    </div>
  </div>
  ```
  This renders nicely without requiring an actual image file. When real screenshots are added later, swap in `<Image>`.

**B. Redesign `app/auth/login/page.tsx`:**

Replace current centered layout with AuthSplitLayout:
```tsx
import { AuthSplitLayout } from '@/components/auth/auth-split-layout'
import { LoginForm } from '@/components/login-form'

export default function Page() {
  return (
    <AuthSplitLayout>
      <LoginForm />
    </AuthSplitLayout>
  )
}
```

Clean and simple -- all form content lives in LoginForm.

**C. Redesign `app/auth/sign-up/page.tsx`:**

Same pattern:
```tsx
import { AuthSplitLayout } from '@/components/auth/auth-split-layout'
import { SignUpForm } from '@/components/sign-up-form'

export default function Page() {
  return (
    <AuthSplitLayout>
      <SignUpForm />
    </AuthSplitLayout>
  )
}
```
  </action>
  <verify>
1. Read AuthSplitLayout and confirm grid-cols-1 lg:grid-cols-2 layout
2. Read login page and confirm it uses AuthSplitLayout
3. Read signup page and confirm it uses AuthSplitLayout
4. Run `pnpm typecheck`
  </verify>
  <done>Both auth pages use split layout with form on left, styled right panel, responsive single-column on mobile.</done>
</task>

<task type="auto">
  <name>Task 2: Add Google OAuth button to login and signup forms</name>
  <files>components/login-form.tsx, components/sign-up-form.tsx</files>
  <action>
**A. Update `components/login-form.tsx`:**

Add Google OAuth section below the existing email/password form. Key changes:

1. Remove the Card wrapper (CardHeader, CardContent, Card) -- the split layout already provides visual structure. Replace with simple div structure:
   - Heading: `<h1 className="text-2xl font-bold">Welcome back</h1>` + subtitle
   - Form fields (email, password, forgot password link)
   - Submit button
   - OR divider
   - Google button
   - Sign up link

2. Add an "OR CONTINUE WITH" divider between the login button and Google button:
   ```tsx
   <div className="relative my-6">
     <div className="absolute inset-0 flex items-center">
       <div className="w-full border-t" />
     </div>
     <div className="relative flex justify-center text-xs uppercase">
       <span className="bg-background px-2 text-muted-foreground">
         Or continue with
       </span>
     </div>
   </div>
   ```

3. Add GoogleOAuthButton below the divider:
   ```tsx
   import { GoogleOAuthButton } from '@/components/auth/google-oauth-button'
   // ... inside render:
   <GoogleOAuthButton />
   ```

4. Keep all existing form logic (useActionState, signIn, error handling, field validation).

5. Update the "Don't have an account?" link to be at the very bottom.

**B. Update `components/sign-up-form.tsx`:**

Same pattern as login form:

1. Remove Card wrapper, use direct heading + form structure:
   - Heading: `<h1 className="text-2xl font-bold">Create an account</h1>` + subtitle "Start collecting reviews in minutes"
   - Form fields (full name, email, password)
   - Submit button
   - OR divider (same as login)
   - Google button
   - "Already have an account? Login" link at bottom

2. Add the same OR divider and GoogleOAuthButton import.

3. Keep all existing form logic (useActionState, signUp, field validation).

For both forms, ensure the visual hierarchy is:
1. Heading + subtitle
2. Email/password fields
3. Primary action button (Login / Sign up)
4. OR divider line
5. Google OAuth button
6. Account toggle link (sign up / login)
  </action>
  <verify>
1. Read login-form.tsx and confirm GoogleOAuthButton import and OR divider
2. Read sign-up-form.tsx and confirm GoogleOAuthButton import and OR divider
3. Confirm Card wrapper is removed from both
4. Run `pnpm typecheck` to verify
5. Run `pnpm lint` to verify
  </verify>
  <done>Login and signup forms show email/password fields, OR divider, Google OAuth button, and account toggle link. No Card wrapper. TypeScript and lint pass.</done>
</task>

</tasks>

<verification>
1. Login page: split layout, form left with Google button, image/placeholder right
2. Signup page: same split layout with Google button
3. Both forms have OR CONTINUE WITH divider
4. Mobile: single column (right panel hidden)
5. `pnpm typecheck` and `pnpm lint` pass
</verification>

<success_criteria>
- AuthSplitLayout component is reusable with customizable right panel
- Login page uses split layout with Google OAuth button
- Signup page uses split layout with Google OAuth button
- Forms no longer wrapped in Card components (cleaner split layout aesthetic)
- Responsive: single column on mobile, two columns on desktop
- TypeScript and lint pass
</success_criteria>

<output>
After completion, create `.planning/phases/16-onboarding-redesign/16-03-SUMMARY.md`
</output>
