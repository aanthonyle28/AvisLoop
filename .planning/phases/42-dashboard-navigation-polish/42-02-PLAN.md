---
phase: 42-dashboard-navigation-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/layout/sidebar.tsx
autonomous: true

must_haves:
  truths:
    - "Active sidebar nav item shows filled icon (weight='fill') and brand orange text (text-accent)"
    - "Active sidebar nav item has no left border — border-l-2 is removed from both active and inactive states"
    - "Active sidebar nav item keeps the same background color (bg-secondary / dark:bg-muted)"
    - "Inactive sidebar nav items show regular-weight icon and muted text with no border"
    - "Collapsed sidebar active state shows filled orange icon on secondary background (sufficient affordance without text)"
    - "Icon className no longer has a conditional for isActive — color inherits from parent Link text-accent"
  artifacts:
    - path: "components/layout/sidebar.tsx"
      provides: "Redesigned NavLink active state"
      contains: "weight={isActive"
  key_links:
    - from: "NavLink active className"
      to: "Icon weight prop"
      via: "isActive boolean"
      pattern: "isActive.*fill.*regular"
---

<objective>
Redesign sidebar active state to use filled icon + brand orange text instead of left border + outline icon.

Purpose: The sidebar active indicator aligns with the mobile bottom-nav pattern (which already uses `text-accent` with no border), creating a cohesive navigation experience across breakpoints. The filled icon weight provides a stronger visual signal than an outline icon.

Output: Updated `sidebar.tsx` with new NavLink active styling — no border-l-2, text-accent on active, filled icon weight when active.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/42-dashboard-navigation-polish/42-RESEARCH.md
@components/layout/sidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Redesign NavLink active state</name>
  <files>components/layout/sidebar.tsx</files>
  <action>
Make the following changes to `components/layout/sidebar.tsx`:

**1. Update NavLink className (lines 79-86):**
Replace the current Link className:
```tsx
className={cn(
  "flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",
  isActive
    ? "bg-secondary dark:bg-muted text-foreground border-l-2 border-accent"
    : "text-foreground/70 dark:text-muted-foreground hover:bg-secondary/70 dark:hover:bg-muted/70 border-l-2 border-transparent",
  collapsed && "justify-center px-2",
  item.badge && "relative"
)}
```
With:
```tsx
className={cn(
  "flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",
  isActive
    ? "bg-secondary dark:bg-muted text-accent"
    : "text-foreground/70 dark:text-muted-foreground hover:bg-secondary/70 dark:hover:bg-muted/70",
  collapsed && "justify-center px-2",
  item.badge && "relative"
)}
```

Key changes:
- Active: `text-foreground` becomes `text-accent` (brand orange for both icon and label)
- Active: `border-l-2 border-accent` removed entirely
- Inactive: `border-l-2 border-transparent` removed entirely (this was a width placeholder for the active border)
- Active background (`bg-secondary dark:bg-muted`) stays the same

**2. Update Icon element (lines 89-96):**
Replace:
```tsx
<Icon
  size={20}
  weight="regular"
  className={cn(
    "shrink-0",
    isActive ? "text-accent" : ""
  )}
/>
```
With:
```tsx
<Icon
  size={20}
  weight={isActive ? "fill" : "regular"}
  className="shrink-0"
/>
```

Key changes:
- `weight` now toggles between `"fill"` (active) and `"regular"` (inactive) based on `isActive`
- Removed `className` conditional for `text-accent` — the icon inherits `currentColor` from the parent Link's `text-accent` class, so a separate color class is unnecessary
- `className="shrink-0"` is the only remaining class (layout, not color)

**Why these changes are safe:**
- Phosphor icons use `currentColor` by default, so the icon color follows the parent text color. With `text-accent` on the Link, the fill icon will be brand orange.
- In collapsed state, the label is hidden but the icon is visible. The `bg-secondary` background + orange fill icon provides clear active indication without the border.
- The `border-l-2 border-transparent` on inactive items added 2px of left visual spacing. Removing it reduces left padding by 2px. The existing `px-3` (12px) padding remains, which is sufficient. Alignment is clean.
  </action>
  <verify>
Run `pnpm typecheck` — no type errors. Verify no `border-l-2` appears anywhere in `sidebar.tsx`. Verify `weight={isActive ? "fill" : "regular"}` is present. Verify `text-accent` is on the active Link className (not on the Icon). Verify no `text-foreground` in active state.
  </verify>
  <done>
Active nav items show filled Phosphor icon + brand orange text (text-accent). No left border on any nav item. Inactive items show regular-weight icon with muted text. Background unchanged. Icon className has no color conditional — inherits from parent. Collapsed sidebar shows orange fill icon on secondary background.
  </done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes with no errors
2. `pnpm lint` passes with no errors
3. In `sidebar.tsx`: no `border-l-2` anywhere, `text-accent` on active Link, `weight={isActive ? "fill" : "regular"}` on Icon, no `text-foreground` in active branch, Icon className is just `"shrink-0"` (no conditional)
</verification>

<success_criteria>
- Active sidebar nav item: filled icon, brand orange text, no left border, same background
- Inactive sidebar nav item: regular icon, muted text, no border (transparent placeholder removed)
- Collapsed sidebar active state: orange fill icon + secondary background (sufficient visual indicator)
- Icon color inherits from parent Link — no separate className conditional on Icon
- typecheck and lint pass
</success_criteria>

<output>
After completion, create `.planning/phases/42-dashboard-navigation-polish/42-02-SUMMARY.md`
</output>
