---
phase: 42-dashboard-navigation-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/dashboard/attention-alerts.tsx
  - components/dashboard/ready-to-send-queue.tsx
autonomous: true

must_haves:
  truths:
    - "Needs Attention rows have no left colored border — the border-l-2 class and getBorderColor function are removed"
    - "Needs Attention severity icons use size-5 matching Ready to Send row icon sizing"
    - "Each Needs Attention item has a dismiss X button on desktop and a Dismiss menu item on mobile"
    - "Dismissing an alert hides it from the rendered list (badge count and show-more count update)"
    - "Ready to Send 'no jobs yet' empty state has dashed border, Briefcase icon in circle, and Add Job button"
    - "Ready to Send 'all caught up' empty state is unchanged (CheckCircle, no dashed border)"
    - "Skeleton rows in AttentionAlertsSkeleton have no left border"
  artifacts:
    - path: "components/dashboard/attention-alerts.tsx"
      provides: "AlertRow without border-l, dismiss button, updated severity icons, skeleton fix"
      contains: "dismissedIds"
    - path: "components/dashboard/ready-to-send-queue.tsx"
      provides: "Dashed-border empty state with Briefcase icon"
      contains: "border-dashed"
  key_links:
    - from: "AttentionAlerts parent"
      to: "AlertRow"
      via: "onDismiss prop"
      pattern: "onDismiss.*alert\\.id"
    - from: "ready-to-send-queue.tsx"
      to: "@phosphor-icons/react"
      via: "Briefcase import"
      pattern: "Briefcase"
---

<objective>
Fix Needs Attention row styling (remove left border, match icon sizing), add dismiss button, and replace Ready to Send empty state with dashed-border design.

Purpose: Dashboard queue sections achieve consistent styling — Needs Attention rows visually match Ready to Send rows, dismiss provides lightweight alert management, and the empty state guides new users to create their first job.

Output: Updated `attention-alerts.tsx` (no border, size-5 icons, dismiss button, skeleton fix) and `ready-to-send-queue.tsx` (dashed-border empty state with Briefcase icon).
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/42-dashboard-navigation-polish/42-RESEARCH.md
@components/dashboard/attention-alerts.tsx
@components/dashboard/ready-to-send-queue.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix AlertRow styling, add dismiss, update skeleton</name>
  <files>components/dashboard/attention-alerts.tsx</files>
  <action>
Make the following changes to `components/dashboard/attention-alerts.tsx`:

**1. Add `X` to the Phosphor import (line 6):**
Change the import to include `X`:
```tsx
import { XCircle, WarningCircle, Info, CheckCircle, DotsThree, DotsThreeVertical, X } from '@phosphor-icons/react'
```

**2. Update SeverityIcon sizes (lines 28-37):**
Change all three icons from `size-4` to `size-5` to match Ready to Send row icon sizing:
```tsx
function SeverityIcon({ severity }: { severity: AttentionAlert['severity'] }) {
  switch (severity) {
    case 'critical':
      return <XCircle weight="fill" className="size-5 text-destructive shrink-0" />
    case 'warning':
      return <WarningCircle weight="fill" className="size-5 text-warning shrink-0" />
    case 'info':
      return <Info weight="fill" className="size-5 text-info shrink-0" />
  }
}
```

**3. Remove the `getBorderColor` function entirely (lines 39-48).**
Delete the entire function — it is no longer used.

**4. Update `AlertRowProps` (lines 50-54) to include `onDismiss`:**
```tsx
interface AlertRowProps {
  alert: AttentionAlert
  isSelected: boolean
  onSelect?: () => void
  onDismiss?: (id: string) => void
}
```

**5. Update `AlertRow` signature and destructuring (line 56):**
```tsx
function AlertRow({ alert, isSelected, onSelect, onDismiss }: AlertRowProps) {
```

**6. Update AlertRow root div className (lines 88-93):**
Remove `border-l-2`, `pl-3` (change to `px-3`), and `getBorderColor(alert.severity)`:
```tsx
<div
  className={cn(
    'flex items-start justify-between gap-3 px-3 py-2.5 cursor-pointer transition-colors',
    isSelected ? 'bg-muted' : 'hover:bg-muted/50',
  )}
  onClick={onSelect}
  role="button"
  tabIndex={0}
  onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') onSelect?.() }}
>
```

**7. Add dismiss X button to the desktop action area (line 110 area):**
Inside the existing `<div className="hidden lg:flex items-center gap-1.5 shrink-0" ...>` div, add this as the LAST child (after the overflow DropdownMenu):
```tsx
<Button
  size="icon-sm"
  variant="ghost"
  className="text-muted-foreground hover:text-foreground"
  onClick={(e) => { e.stopPropagation(); onDismiss?.(alert.id) }}
  aria-label="Dismiss alert"
>
  <X className="size-4" />
</Button>
```

**8. Add dismiss to the mobile overflow menu (line 155-183 area):**
Inside the mobile `<DropdownMenuContent align="end">`, add a "Dismiss" item as the LAST child (after the existing items, before the closing `</DropdownMenuContent>`):
```tsx
<DropdownMenuItem onClick={() => onDismiss?.(alert.id)}>
  <X className="size-4 mr-2" />
  Dismiss
</DropdownMenuItem>
```
Note: DropdownMenu already handles stopPropagation internally, so no explicit `e.stopPropagation()` needed on DropdownMenuItem.

**9. Add `dismissedIds` state in `AttentionAlerts` component (line 190 area):**
After the existing `const [expanded, setExpanded] = useState(false)`, add:
```tsx
const [dismissedIds, setDismissedIds] = useState<Set<string>>(new Set())
```

**10. Filter alerts through `dismissedIds` before display:**
Replace the current `displayedAlerts` computation:
```tsx
const displayedAlerts = expanded ? alerts : alerts.slice(0, 3)
const hasMore = alerts.length > 3
```
With:
```tsx
const visibleAlerts = alerts.filter(a => !dismissedIds.has(a.id))
const displayedAlerts = expanded ? visibleAlerts : visibleAlerts.slice(0, 3)
const hasMore = visibleAlerts.length > 3
```

**11. Create dismiss handler:**
After the `hasMore` line, add:
```tsx
const handleDismiss = (id: string) => {
  setDismissedIds(prev => new Set([...prev, id]))
}
```

**12. Update badge count to use `visibleAlerts`:**
Change `{alerts.length > 0 && (` to `{visibleAlerts.length > 0 && (` and change `<Badge variant="destructive">{alerts.length}</Badge>` to `<Badge variant="destructive">{visibleAlerts.length}</Badge>`.

**13. Update empty check to use `visibleAlerts`:**
Change `{alerts.length === 0 ? (` to `{visibleAlerts.length === 0 ? (`.

**14. Pass `onDismiss` to each `AlertRow`:**
In the map rendering AlertRow components, add the `onDismiss` prop:
```tsx
<AlertRow
  key={alert.id}
  alert={alert}
  isSelected={selectedAlertId === alert.id}
  onSelect={() => onSelectAlert?.(alert.id)}
  onDismiss={handleDismiss}
/>
```

**15. Update "View all" count to use `visibleAlerts`:**
Change `{expanded ? 'Show less' : \`View all (${alerts.length})\`}` to `{expanded ? 'Show less' : \`View all (${visibleAlerts.length})\`}`.

**16. Update skeleton rows (line 252):**
Remove `border-l-2 border-l-muted` from the skeleton row div. Change:
```tsx
<div key={i} className="flex items-start justify-between gap-3 rounded-md border-l-2 border-l-muted pl-3 pr-3 py-2.5">
```
To:
```tsx
<div key={i} className="flex items-start justify-between gap-3 rounded-md px-3 py-2.5">
```

Also update the skeleton icon size from `size-4` to `size-5` to match:
```tsx
<div className="size-5 bg-muted animate-pulse rounded-full shrink-0" />
```
  </action>
  <verify>
Run `pnpm typecheck` — no type errors. Verify `getBorderColor` is fully removed. Verify `X` is imported. Verify `dismissedIds` state is used to filter `visibleAlerts`. Verify skeleton has no `border-l-2`.
  </verify>
  <done>
AlertRow has no left colored border. Severity icons are size-5. Dismiss X button exists on desktop. Dismiss menu item exists in mobile overflow. Dismissing hides the alert from the list and updates badge/show-more counts. Skeleton rows have no left border. getBorderColor function is removed.
  </done>
</task>

<task type="auto">
  <name>Task 2: Replace Ready to Send empty state with dashed-border design</name>
  <files>components/dashboard/ready-to-send-queue.tsx</files>
  <action>
Make the following changes to `components/dashboard/ready-to-send-queue.tsx`:

**1. Add `Briefcase` to the Phosphor import (lines 6-21):**
Add `Briefcase` to the existing import block from `@phosphor-icons/react`. It should go alongside the other icons already imported there.

**2. Replace the "no jobs yet" empty state (lines 588-601):**
Replace:
```tsx
{jobs.length === 0 && !hasJobHistory && (
  <div className="flex flex-col items-center justify-center py-8 text-center">
    <Plus className="h-10 w-10 text-muted-foreground mb-3" />
    <p className="text-sm text-muted-foreground mb-3">
      No jobs yet — add a completed job to get started
    </p>
    <Button asChild size="sm">
      <Link href="/jobs">
        <Plus className="h-4 w-4 mr-1" />
        Add Job
      </Link>
    </Button>
  </div>
)}
```
With:
```tsx
{jobs.length === 0 && !hasJobHistory && (
  <div className="flex flex-col items-center justify-center py-8 text-center rounded-lg border-2 border-dashed border-border">
    <div className="rounded-full bg-muted p-3 mb-3">
      <Briefcase className="h-6 w-6 text-muted-foreground" />
    </div>
    <p className="text-sm text-muted-foreground mb-3">
      No jobs yet — add a completed job to get started
    </p>
    <Button asChild size="sm">
      <Link href="/jobs">
        <Plus className="h-4 w-4 mr-1" />
        Add Job
      </Link>
    </Button>
  </div>
)}
```

Key changes:
- Added `rounded-lg border-2 border-dashed border-border` to the container div
- Replaced the bare `Plus` icon (h-10 w-10) with a `Briefcase` icon (h-6 w-6) wrapped in a `rounded-full bg-muted p-3` circle container
- The "all caught up" empty state (lines 579-586, `hasJobHistory` === true) is NOT changed

**Important:** Do NOT modify the "all caught up" empty state. Only the "no jobs yet" state gets the dashed border treatment.
  </action>
  <verify>
Run `pnpm typecheck` — no type errors. Verify `Briefcase` is imported from `@phosphor-icons/react`. Verify the "all caught up" empty state is unchanged. Verify the "no jobs yet" state has `border-dashed` and `Briefcase`.
  </verify>
  <done>
Ready to Send "no jobs yet" empty state has a dashed border container with a Briefcase icon in a muted circle. The "all caught up" empty state remains unchanged. Briefcase is imported from Phosphor.
  </done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes with no errors
2. `pnpm lint` passes with no errors
3. In `attention-alerts.tsx`: no `border-l-2` class anywhere (real rows or skeleton), no `getBorderColor` function, `X` imported, `dismissedIds` state present, `size-5` on severity icons
4. In `ready-to-send-queue.tsx`: `Briefcase` imported, "no jobs yet" block has `border-dashed`, "all caught up" block is unchanged
</verification>

<success_criteria>
- Needs Attention rows have no left colored border
- Severity icons are size-5 (matching Ready to Send rows)
- Desktop dismiss X button and mobile dismiss menu item work
- Dismissing hides alert from list (badge count and show-more count update correctly)
- Skeleton rows have no left border and size-5 icon placeholder
- Ready to Send "no jobs yet" empty state has dashed border with Briefcase in circle
- Ready to Send "all caught up" state is untouched
- typecheck and lint pass
</success_criteria>

<output>
After completion, create `.planning/phases/42-dashboard-navigation-polish/42-01-SUMMARY.md`
</output>
