---
phase: 21-email-preview-template-selection
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/send/send-settings-bar.tsx
autonomous: true

must_haves:
  truths:
    - "Template dropdown on send page lists all saved templates plus a 'Create Template' option separated by a visual divider"
    - "Selecting 'Create Template' navigates to the settings template page without crashing or losing the page"
  artifacts:
    - path: "components/send/send-settings-bar.tsx"
      provides: "Template dropdown with 'Create Template' navigation option"
      contains: "create-new"
  key_links:
    - from: "components/send/send-settings-bar.tsx"
      to: "/dashboard/settings"
      via: "router.push on create-new selection"
      pattern: "router.push.*settings"
---

<objective>
Add a "Create Template" option to the template dropdown that navigates to the settings template page.

Purpose: Users should be able to create new templates without leaving the mental context of sending. A shortcut in the dropdown reduces friction by keeping template management discoverable in-flow.

Output: Enhanced SendSettingsBar with "Create Template" navigation option in the template dropdown.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-email-preview-template-selection/21-RESEARCH.md
@components/send/send-settings-bar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add "Create Template" option to template dropdown</name>
  <files>
    components/send/send-settings-bar.tsx
  </files>
  <action>
1. Add `import { useRouter } from 'next/navigation'` at the top of the file
2. Inside the component, add `const router = useRouter()`
3. Modify the `handleTemplateChange` function:
   - Before the existing localStorage logic, check if `templateId === 'create-new'`
   - If so, call `router.push('/dashboard/settings#templates')` and `return` early (do NOT save to localStorage or call onTemplateChange)
   - Otherwise, proceed with existing logic (save to localStorage, call onTemplateChange)
4. In the `<select>` element, after the `templates.map(...)` options, add:
   ```tsx
   <option disabled>──────────</option>
   <option value="create-new">+ Create Template</option>
   ```
5. Ensure the disabled separator option uses the em-dash pattern `──────────` for visual separation
6. The "create-new" value must NOT match any real template ID (UUIDs), so this is safe
  </action>
  <verify>
- `pnpm typecheck` passes
- `pnpm lint` passes
- The template dropdown renders all templates plus a separator and "Create Template" option
- Selecting "Create Template" does NOT call onTemplateChange or update localStorage
  </verify>
  <done>
- Template dropdown shows all saved templates, a visual separator, and "+ Create Template" option
- Selecting "+ Create Template" navigates to /dashboard/settings#templates
- Normal template selection still works as before (saves to localStorage, calls onTemplateChange)
  </done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` — zero errors
2. `pnpm lint` — zero errors or warnings
3. Manual: Open send page, click template dropdown, verify all templates listed plus separator and "+ Create Template"
4. Manual: Select "+ Create Template", verify navigation to /dashboard/settings#templates
5. Manual: Select a normal template, verify it still works (preview updates, localStorage saved)
</verification>

<success_criteria>
- Template dropdown includes "+ Create Template" as the last option after a separator
- Clicking it navigates to settings template page
- No regression in normal template selection behavior
</success_criteria>

<output>
After completion, create `.planning/phases/21-email-preview-template-selection/21-02-SUMMARY.md`
</output>
