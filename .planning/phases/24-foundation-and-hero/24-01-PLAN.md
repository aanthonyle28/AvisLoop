---
phase: 24-foundation-and-hero
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/fade-in.tsx
  - components/marketing/v2/animated-demo.tsx
  - components/marketing/v2/hero-v2.tsx
autonomous: true

must_haves:
  truths:
    - "Hero displays an outcome-focused headline under 8 words communicating 'get more reviews in 2 minutes'"
    - "Animated product demo cycles through 3 steps (contact, message, send) every 3 seconds using CSS transitions"
    - "Hero layout has floating UI mockups with gradient background effects"
    - "Primary CTA 'Start Free Trial' is visible above the fold"
    - "All animations respect prefers-reduced-motion via motion-safe: variants"
    - "All components use semantic color tokens and render correctly in dark mode"
  artifacts:
    - path: "components/ui/fade-in.tsx"
      provides: "Reusable scroll-triggered animation wrapper"
      contains: "IntersectionObserver"
    - path: "components/marketing/v2/hero-v2.tsx"
      provides: "Redesigned hero section with outcome copy and animated demo"
      contains: "3× More Reviews"
    - path: "components/marketing/v2/animated-demo.tsx"
      provides: "3-step animated product demo component"
      contains: "setCurrentStep"
  key_links:
    - from: "components/marketing/v2/hero-v2.tsx"
      to: "components/ui/fade-in.tsx"
      via: "import FadeIn"
      pattern: "import.*FadeIn.*fade-in"
    - from: "components/marketing/v2/hero-v2.tsx"
      to: "components/marketing/v2/animated-demo.tsx"
      via: "import AnimatedProductDemo"
      pattern: "import.*AnimatedProductDemo.*animated-demo"
---

<objective>
Create the reusable FadeIn animation component and the redesigned hero section with outcome-focused headline, animated 3-step product demo, floating UI mockups, and gradient background effects.

Purpose: Deliver the primary above-the-fold experience that communicates AvisLoop's value proposition within 5 seconds -- visitors see "3x More Reviews in 2 Minutes" with a live animated demo showing how simple the send flow is.

Output: Three new component files (FadeIn wrapper, AnimatedDemo, HeroV2) ready for integration into the landing page.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-foundation-and-hero/24-RESEARCH.md

# Existing code to reference
@components/marketing/hero.tsx — current hero (keep for rollback, do NOT modify)
@components/ui/geometric-marker.tsx — use for visual accent in floating stat card
@app/globals.css — existing CSS variables, prefers-reduced-motion rules
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FadeIn scroll animation wrapper</name>
  <files>components/ui/fade-in.tsx</files>
  <action>
Create a reusable `'use client'` component at `components/ui/fade-in.tsx` that wraps children in a scroll-triggered fade animation using IntersectionObserver.

**Props interface:**
- `children: React.ReactNode`
- `delay?: number` (default 0, in ms, applied as `transitionDelay` inline style)
- `direction?: 'up' | 'down' | 'left' | 'right' | 'none'` (default `'up'`)
- `className?: string` (for additional styling)

**Implementation details:**
- Mark as `'use client'` (IntersectionObserver requires browser)
- Use `useRef<HTMLDivElement>` + `useState(false)` for visibility tracking
- Create IntersectionObserver in `useEffect` with `{ threshold: 0.1, rootMargin: '50px' }`
- On `isIntersecting`, set visible to `true` and call `observer.disconnect()` (trigger once only)
- Clean up observer in effect return
- Direction map: `up` = `translate-y-8`, `down` = `-translate-y-8`, `left` = `translate-x-8`, `right` = `-translate-x-8`, `none` = no translate
- When visible: `opacity-100 translate-y-0 translate-x-0`
- When not visible: `opacity-0 {directionClass}`
- ALL animation classes prefixed with `motion-safe:` (transition-all, duration-700, ease-out)
- Use `cn()` from `@/lib/utils` for class merging
- Apply `transitionDelay` via inline `style` prop (not Tailwind class) for arbitrary delay values

**Do NOT:**
- Use any animation library (no Framer Motion, no GSAP)
- Animate layout properties (height, width, margin) -- only transform and opacity
- Forget the `'use client'` directive
  </action>
  <verify>
Run `pnpm typecheck` -- no errors in fade-in.tsx. Confirm file exports `FadeIn` component. Confirm `motion-safe:` prefix on all animation classes. Confirm `'use client'` directive at top.
  </verify>
  <done>FadeIn component exists, exports correctly, uses IntersectionObserver with motion-safe: prefix on all animation classes, accepts delay/direction/className props.</done>
</task>

<task type="auto">
  <name>Task 2: Create AnimatedProductDemo and HeroV2 components</name>
  <files>components/marketing/v2/animated-demo.tsx, components/marketing/v2/hero-v2.tsx</files>
  <action>
**Create `components/marketing/v2/animated-demo.tsx`:**

A `'use client'` component that shows a cycling 3-step product demo inside a browser chrome mockup.

Steps cycle: "Select Contact" -> "Compose Message" -> "Send & Done!" every 3 seconds via `setInterval` in `useEffect`.

Structure:
1. Browser chrome (3 colored dots: red-400, yellow-400, green-400) at top
2. Header bar: "AvisLoop" label right-aligned, step label left-aligned
3. Main content area showing animated step content:
   - Step 1 (Select Contact): Show a mock contact list with 2-3 names. Highlight the "active" one with a radio/check indicator and primary bg. Names like "Sarah Mitchell", "James Cooper", "Maria Garcia".
   - Step 2 (Compose Message): Show a mock email compose area with subject line "How was your visit?" and a short body preview "Hi Sarah, we'd love to hear about your experience..." in a text area style box.
   - Step 3 (Send & Done!): Show a success state with a checkmark icon (use lucide `CheckCircle`), "Request Sent!" text, and a subtle confetti/celebration feel (a small green badge "Delivered").
4. Progress bar at bottom: 3 segments, current step highlighted with `bg-primary`, others `bg-muted`. Use `motion-safe:transition-colors motion-safe:duration-300`.
5. Step transitions: Use opacity transition. Current step `opacity-100`, others `opacity-0 absolute`. Wrap step content in a relative container with `min-h-[200px]` to prevent layout shift.

Card styling: `rounded-2xl border border-border/50 bg-card shadow-2xl shadow-primary/5 p-6`

**Floating cards (outside the main demo card, positioned absolute):**
- Top-right: Stat card with GeometricMarker (triangle, lime, md) showing "+47% More reviews" -- `absolute -top-4 -right-4 md:right-0` with `motion-safe:transform motion-safe:-rotate-3 motion-safe:hover:rotate-0 motion-safe:transition-transform motion-safe:duration-300`
- Bottom-left: Review card with 5 yellow stars (lucide `Star` with `fill-yellow-400 text-yellow-400`), quote "Excellent service!", attribution "-- Sarah M." -- `absolute -bottom-4 -left-4 md:left-0` with `motion-safe:transform motion-safe:rotate-2 motion-safe:hover:rotate-0`

Both floating cards: `rounded-xl border border-border/50 bg-card shadow-lg p-4`

**Create `components/marketing/v2/hero-v2.tsx`:**

A `'use client'` component (needs FadeIn which is client).

Structure:
1. `<section>` with `relative overflow-hidden py-20 md:py-28 lg:py-32`
2. Background gradient layer: `absolute inset-0 bg-gradient-to-br from-primary/5 via-background to-accent-lime/5 dark:from-primary/10 dark:via-background dark:to-accent-lime/10` (NOT using `accent` which maps to primary -- use the lime accent variable)
3. Container: `container relative mx-auto max-w-6xl px-4 sm:px-6 lg:px-8`
4. Grid: `grid lg:grid-cols-[55%_45%] gap-12 lg:gap-8 items-center`

Left column (wrapped in `<FadeIn direction="up">`):
- Trust badge: inline-flex rounded-full with ping animation dot + "Trusted by 500+ local businesses" text. Styling: `border border-border/60 bg-card/80 px-4 py-1.5 text-sm font-medium text-muted-foreground backdrop-blur-sm mb-6`
- Headline `<h1>`: "3× More Reviews" / line break / "in 2 Minutes" -- `text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight text-balance text-foreground`
- Subheadline `<p>`: "Send review requests instantly. No complex campaigns, no forgotten follow-ups. Just results that grow your business." -- `mt-6 text-lg md:text-xl text-muted-foreground max-w-xl mx-auto lg:mx-0`
- CTA buttons: Primary "Start Free Trial" links to `/auth/sign-up`, outline "See Pricing" links to `/pricing` -- `mt-8 flex flex-col sm:flex-row gap-4 justify-center lg:justify-start`. Primary button: `text-base px-8 bg-foreground text-background hover:bg-foreground/90`. Outline: `text-base border-border/60 hover:bg-muted/50`.
- Trust indicators: "25 free sends . 2-min setup . Cancel anytime" -- `mt-6 text-sm text-muted-foreground` (use bullet character)

Right column (wrapped in `<FadeIn direction="up" delay={200}>`):
- `<div className="relative lg:pl-8">` containing `<AnimatedProductDemo />`

Imports needed: `Link` from next/link, `Button` from @/components/ui/button, `FadeIn` from @/components/ui/fade-in, `AnimatedProductDemo` from ./animated-demo

**Critical requirements:**
- ALL color classes must use semantic tokens (bg-card, text-foreground, border-border, bg-muted, text-muted-foreground, bg-background). NO hardcoded grays.
- ALL animation classes must have `motion-safe:` prefix
- Both files must have `'use client'` directive
- Headline must be exactly under 8 words (it's 6: "3x More Reviews in 2 Minutes")
  </action>
  <verify>
Run `pnpm typecheck` -- no errors. Grep for `bg-white`, `bg-gray`, `text-gray` in both files -- should find zero matches. Confirm `'use client'` in both files. Confirm headline text contains "3× More Reviews" and "in 2 Minutes".
  </verify>
  <done>HeroV2 renders with outcome-focused headline under 8 words, gradient background, FadeIn animations, trust badge, CTA buttons linking to /auth/sign-up and /pricing, and trust indicators. AnimatedProductDemo cycles through 3 steps (contact, message, send) every 3 seconds with floating stat and review cards. All use semantic color tokens and motion-safe: animation prefixes.</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes with zero errors
2. `pnpm lint` passes
3. No hardcoded color values (grep for `bg-white`, `bg-gray`, `text-gray` in v2/ directory returns empty)
4. All three files exist: `components/ui/fade-in.tsx`, `components/marketing/v2/hero-v2.tsx`, `components/marketing/v2/animated-demo.tsx`
5. All files marked `'use client'`
6. Headline is under 8 words and outcome-focused
7. FadeIn uses IntersectionObserver with `motion-safe:` prefix on all animation classes
8. AnimatedProductDemo has 3-step cycle with progress indicator
</verification>

<success_criteria>
- FadeIn component is reusable and exported from components/ui/
- HeroV2 displays "3x More Reviews in 2 Minutes" headline
- AnimatedProductDemo cycles through contact/message/send steps
- Floating cards show +47% stat and 5-star review
- Gradient background adapts to dark mode (higher opacity)
- All animations disabled when prefers-reduced-motion is set
- pnpm typecheck and pnpm lint both pass
</success_criteria>

<output>
After completion, create `.planning/phases/24-foundation-and-hero/24-01-SUMMARY.md`
</output>
