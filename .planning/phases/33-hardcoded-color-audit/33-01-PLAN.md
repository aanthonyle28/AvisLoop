---
phase: 33-hardcoded-color-audit
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/layout/app-shell.tsx
  - components/layout/sidebar.tsx
  - components/layout/page-header.tsx
  - components/layout/notification-bell.tsx
  - components/settings/delete-account-dialog.tsx
autonomous: true

must_haves:
  truths:
    - "Running grep for bg-[#, text-[#, border-[# in components/ returns zero hits"
    - "Sidebar active state uses bg-secondary instead of bg-[#F2F2F2]"
    - "Sidebar borders use border-border instead of border-[#E2E2E2]"
    - "App shell background uses bg-background instead of bg-[#F9F9F9]"
    - "Page header uses bg-card and border-border instead of bg-white and border-[#E2E2E2]"
    - "Notification bell badge uses bg-destructive text-destructive-foreground instead of bg-red-500 text-white"
    - "Delete account dialog uses Button component with destructive variant instead of raw button elements"
    - "Lint and typecheck pass with zero errors"
  artifacts:
    - path: "components/layout/sidebar.tsx"
      provides: "Token-based sidebar styling"
      contains: "bg-secondary"
    - path: "components/layout/app-shell.tsx"
      provides: "Token-based shell background"
      contains: "bg-background"
    - path: "components/layout/page-header.tsx"
      provides: "Token-based header styling"
      contains: "bg-card"
    - path: "components/layout/notification-bell.tsx"
      provides: "Token-based bell styling"
      contains: "bg-destructive"
    - path: "components/settings/delete-account-dialog.tsx"
      provides: "Button component usage for destructive actions"
      contains: "variant=\"destructive\""
  key_links:
    - from: "components/layout/sidebar.tsx"
      to: "app/globals.css"
      via: "CSS custom property tokens"
      pattern: "bg-secondary|border-border|bg-card"
    - from: "components/settings/delete-account-dialog.tsx"
      to: "components/ui/button.tsx"
      via: "Button component import"
      pattern: "import.*Button.*from.*ui/button"
---

<objective>
Replace all hardcoded hex color values and raw color utilities in layout chrome files with semantic design tokens. Also migrate raw `<button>` elements in delete-account-dialog.tsx to use the Button component with destructive variant.

Purpose: Phase 34 (warm palette swap) will change CSS custom property values in globals.css. Any component still using hardcoded hex values will not pick up those changes, creating visual inconsistency. This plan ensures 100% token coverage in the layout shell.

Output: Five modified files with zero hardcoded hex values remaining in components/.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/33-hardcoded-color-audit/33-RESEARCH.md
@components/layout/app-shell.tsx
@components/layout/sidebar.tsx
@components/layout/page-header.tsx
@components/layout/notification-bell.tsx
@components/settings/delete-account-dialog.tsx
@components/ui/button.tsx
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace hardcoded hex values in layout chrome files</name>
  <files>
    components/layout/app-shell.tsx
    components/layout/sidebar.tsx
    components/layout/page-header.tsx
    components/layout/notification-bell.tsx
  </files>
  <action>
    Make the following exact replacements in each file. Use the Edit tool for each change.

    **app-shell.tsx (1 change):**
    - Line 32: Replace `bg-[#F9F9F9] dark:bg-background` with `bg-background`
      - Rationale: `--background` is `0 0% 97.6%` in light (#F8F8F8, nearly identical to #F9F9F9) and `0 0% 9%` in dark. The dark: override becomes redundant.

    **sidebar.tsx (9 changes):**
    - Line 89: Replace `bg-[#F2F2F2] dark:bg-muted` with `bg-secondary dark:bg-muted`
      - Rationale: `--secondary` is `0 0% 92%` (#EBEBEB), close to #F2F2F2 and semantically correct for active nav state
    - Line 90: Replace `hover:bg-[#F2F2F2]/70 dark:hover:bg-muted/70` with `hover:bg-secondary/70 dark:hover:bg-muted/70`
    - Line 195: Replace `hover:bg-[#F2F2F2]/70 dark:hover:bg-muted/70` with `hover:bg-secondary/70 dark:hover:bg-muted/70`
    - Line 120: Replace `bg-white dark:bg-card` with `bg-card` (bg-card is already #FFFFFF in light mode)
    - Line 120: Replace `border-[#E2E2E2] dark:border-border` with `border-border` (--border is `0 0% 89%` = #E3E3E3, nearly identical to #E2E2E2)
    - Line 126: Replace `border-[#E2E2E2] dark:border-border` with `border-border`
    - Line 164: Replace `border-[#E2E2E2] dark:border-border` with `border-border`
    - Line 180: Replace `border-[#E2E2E2] dark:border-border` with `border-border`
    - Line 106: Replace `bg-red-500 text-white text-xs` with `bg-destructive text-destructive-foreground text-xs`
    - Line 111: Replace `bg-red-500 rounded-full` with `bg-destructive rounded-full`

    **page-header.tsx (1 change, 2 replacements on same line):**
    - Line 28: Replace `bg-white dark:bg-card` with `bg-card`
    - Line 28: Replace `border-[#E2E2E2] dark:border-border` with `border-border`

    **notification-bell.tsx (2 changes):**
    - Line 39: Replace `hover:bg-[#F2F2F2]/70 dark:hover:bg-muted/70` with `hover:bg-secondary/70 dark:hover:bg-muted/70`
    - Line 52: Replace `bg-red-500 text-[10px] font-bold text-white` with `bg-destructive text-[10px] font-bold text-destructive-foreground`
  </action>
  <verify>
    Run: `grep -rn "bg-\[#\|text-\[#\|border-\[#" components/` — must return zero hits.
    Run: `grep -rn "bg-white" components/layout/` — must return zero hits.
    Run: `grep -rn "bg-red-500 text-white" components/layout/` — must return zero hits.
  </verify>
  <done>
    All four layout files use only semantic tokens (bg-background, bg-card, bg-secondary, border-border, bg-destructive, text-destructive-foreground). No hardcoded hex arbitrary values remain in components/.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate delete-account-dialog.tsx to use Button component</name>
  <files>
    components/settings/delete-account-dialog.tsx
  </files>
  <action>
    The delete-account-dialog.tsx uses raw `<button>` elements with hardcoded `bg-red-600 hover:bg-red-700 text-white` instead of the project's Button component with `variant="destructive"`.

    1. Add Button import at the top of the file:
       ```
       import { Button } from '@/components/ui/button'
       ```

    2. Replace the DialogTrigger button (line 56-61):
       - Old: `<button type="button" className="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium disabled:opacity-50">Delete Account</button>`
       - New: `<Button variant="destructive" size="default">Delete Account</Button>`

    3. Replace the cancel button (line 99-104):
       - Old: `<button type="button" onClick={() => handleOpenChange(false)} disabled={isDeleting} className="px-4 py-2 rounded-md text-sm font-medium border border-border hover:bg-muted disabled:opacity-50">Cancel</button>`
       - New: `<Button variant="outline" onClick={() => handleOpenChange(false)} disabled={isDeleting}>Cancel</Button>`

    4. Replace the confirm delete button (line 107-114):
       - Old: `<button type="button" onClick={handleDelete} disabled={!isConfirmed || isDeleting} className="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed">{isDeleting ? 'Deleting...' : 'Delete My Account'}</button>`
       - New: `<Button variant="destructive" onClick={handleDelete} disabled={!isConfirmed || isDeleting}>{isDeleting ? 'Deleting...' : 'Delete My Account'}</Button>`

    5. Replace the input focus ring (line 87):
       - Old: `focus:ring-red-500 focus:border-red-500`
       - New: `focus:ring-destructive/50 focus:border-destructive`

    6. Replace error text color (line 94):
       - Old: `text-red-600`
       - New: `text-destructive`
  </action>
  <verify>
    Run: `grep -n "bg-red-600\|hover:bg-red-700\|text-red-600\|ring-red-500" components/settings/delete-account-dialog.tsx` — must return zero hits.
    Run: `grep -n "import.*Button.*from" components/settings/delete-account-dialog.tsx` — must show Button import.
  </verify>
  <done>
    delete-account-dialog.tsx uses Button component with destructive variant for all action buttons. No raw red color values remain. Focus ring and error text use destructive token.
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify lint and typecheck pass</name>
  <files></files>
  <action>
    Run lint and typecheck to ensure all changes compile correctly:
    1. `pnpm lint`
    2. `pnpm typecheck`

    If either fails, fix the issues in the modified files.
  </action>
  <verify>
    Both `pnpm lint` and `pnpm typecheck` exit with code 0.
  </verify>
  <done>
    Lint and typecheck pass with zero errors after all token replacements.
  </done>
</task>

</tasks>

<verification>
1. `grep -rn "bg-\[#\|text-\[#\|border-\[#" components/` returns zero hits
2. `grep -rn "bg-white\|bg-black" components/layout/` returns zero hits (for layout background usage)
3. `grep -rn "bg-red-500 text-white\|bg-red-600.*text-white" components/layout/ components/settings/delete-account-dialog.tsx` returns zero hits
4. `pnpm lint` passes
5. `pnpm typecheck` passes
</verification>

<success_criteria>
- Zero hardcoded hex arbitrary values (bg-[#...], text-[#...], border-[#...]) in components/
- sidebar.tsx uses bg-secondary, border-border, bg-card, bg-destructive tokens
- app-shell.tsx uses bg-background token
- page-header.tsx uses bg-card, border-border tokens
- notification-bell.tsx uses bg-secondary/70, bg-destructive tokens
- delete-account-dialog.tsx uses Button component with destructive variant
- Lint and typecheck pass
</success_criteria>

<output>
After completion, create `.planning/phases/33-hardcoded-color-audit/33-01-SUMMARY.md`
</output>
