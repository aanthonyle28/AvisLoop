---
phase: 30.1-audit-gaps
plan: 07
type: execute
wave: 2
depends_on: []
files_modified:
  - components/campaigns/preset-picker.tsx
  - components/campaigns/campaign-card.tsx
autonomous: true

must_haves:
  truths:
    - "Campaign preset cards show timing information"
    - "Users can see how many touches and timing before selecting"
    - "Timing displayed in human-readable format (e.g., '24h, 48h, 72h')"
  artifacts:
    - path: "components/campaigns/preset-picker.tsx"
      provides: "Preset cards with timing info"
      contains: "timing"
  key_links:
    - from: "components/campaigns/preset-picker.tsx"
      to: "campaign preset data"
      via: "display timing sequence"
      pattern: "delay.*hours|timing"
---

<objective>
Add timing information display to campaign preset cards.

Purpose: Users should see timing sequence before selecting a preset (QA L03-02).

Output: Preset picker cards show touch timing (e.g., "Email at 24h, SMS at 48h, Email at 72h").
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/QA-AUDIT.md (L03-02: Preset cards could show timing info)

Preset picker: @components/campaigns/preset-picker.tsx
Campaign card: @components/campaigns/campaign-card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add timing info to preset picker cards</name>
  <files>components/campaigns/preset-picker.tsx</files>
  <action>
Update the preset picker to display touch timing information on each preset card.

The preset data should include the touch sequence. Add a visual display showing:
- Number of touches
- Channel for each touch (Email/SMS icons)
- Timing for each touch

```tsx
import { EnvelopeSimple, ChatCircle, Clock } from '@phosphor-icons/react'

// Example preset data structure (may already exist):
const CAMPAIGN_PRESETS = [
  {
    id: 'conservative',
    name: 'Conservative',
    description: 'Gentle follow-up with 2 emails',
    touches: [
      { channel: 'email', delay_hours: 24 },
      { channel: 'email', delay_hours: 72 },
    ],
  },
  {
    id: 'standard',
    name: 'Standard',
    description: 'Balanced approach with email and SMS',
    touches: [
      { channel: 'email', delay_hours: 24 },
      { channel: 'sms', delay_hours: 48 },
      { channel: 'email', delay_hours: 96 },
    ],
  },
  {
    id: 'aggressive',
    name: 'Aggressive',
    description: 'Maximum follow-up for best results',
    touches: [
      { channel: 'email', delay_hours: 4 },
      { channel: 'sms', delay_hours: 24 },
      { channel: 'email', delay_hours: 48 },
      { channel: 'sms', delay_hours: 72 },
    ],
  },
]

// In the preset card render, add timing display:
<div className="flex items-center gap-2 mt-3 text-xs text-muted-foreground">
  <Clock className="h-3.5 w-3.5" />
  <div className="flex items-center gap-1.5">
    {preset.touches.map((touch, idx) => (
      <span key={idx} className="flex items-center gap-0.5">
        {touch.channel === 'email' ? (
          <EnvelopeSimple className="h-3 w-3" />
        ) : (
          <ChatCircle className="h-3 w-3" />
        )}
        <span>{formatDelay(touch.delay_hours)}</span>
        {idx < preset.touches.length - 1 && <span className="mx-1">â†’</span>}
      </span>
    ))}
  </div>
</div>

// Helper function:
function formatDelay(hours: number): string {
  if (hours < 24) return `${hours}h`
  const days = Math.round(hours / 24)
  return `${days}d`
}
```

This shows a visual timeline like:
- Conservative: ðŸ“§ 24h â†’ ðŸ“§ 3d
- Standard: ðŸ“§ 24h â†’ ðŸ’¬ 2d â†’ ðŸ“§ 4d
- Aggressive: ðŸ“§ 4h â†’ ðŸ’¬ 24h â†’ ðŸ“§ 2d â†’ ðŸ’¬ 3d
  </action>
  <verify>
- grep "Clock" components/campaigns/preset-picker.tsx
- grep "delay_hours" components/campaigns/preset-picker.tsx
- grep "formatDelay" components/campaigns/preset-picker.tsx
  </verify>
  <done>Preset picker cards show timing sequence with channel icons</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. `pnpm lint` passes
3. Campaign presets page shows timing on each preset card
4. Timing shows channel icons (email/SMS) with delays
5. Format is human-readable (hours or days)
</verification>

<success_criteria>
- Preset cards display touch timing sequence
- Each touch shows channel icon and delay
- Format is human-readable (4h, 24h, 2d, 3d)
- No TypeScript or lint errors
</success_criteria>

<output>
After completion, create `.planning/phases/30.1-audit-gaps/30.1-07-SUMMARY.md`
</output>
