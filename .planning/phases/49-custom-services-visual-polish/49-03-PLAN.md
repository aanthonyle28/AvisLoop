---
phase: 49-custom-services-visual-polish
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - components/jobs/jobs-client.tsx
  - app/(dashboard)/analytics/page.tsx
  - app/(dashboard)/feedback/page.tsx
  - app/(dashboard)/campaigns/campaigns-shell.tsx
  - components/customers/customers-client.tsx
  - components/jobs/job-table.tsx
  - components/history/history-table.tsx
  - components/send/quick-send-modal.tsx
autonomous: true

must_haves:
  truths:
    - "All dashboard pages display subtitle with static description + centered dot + dynamic count"
    - "Jobs table rows have white (bg-card) background"
    - "History table rows have white (bg-card) background"
    - "QuickSendModal uses consistent spacing and styling with the warm design system"
  artifacts:
    - "components/jobs/jobs-client.tsx with subtitle pattern"
    - "app/(dashboard)/analytics/page.tsx with subtitle"
    - "app/(dashboard)/feedback/page.tsx with normalized subtitle"
    - "app/(dashboard)/campaigns/campaigns-shell.tsx with subtitle count"
    - "components/customers/customers-client.tsx with subtitle count"
    - "components/jobs/job-table.tsx with bg-card on rows"
    - "components/history/history-table.tsx with bg-card on rows"
    - "components/send/quick-send-modal.tsx with visual polish"
  key_links:
    - "Subtitle canonical pattern from HistoryClient: static description + &middot; + dynamic count"
    - "bg-card applied at call site per-table — NOT in ui/table.tsx base component"
    - "Subtitle counts must use already-available data — no new DB queries"
---

<objective>
Normalize page subtitles across all dashboard pages to follow the canonical pattern, add white backgrounds to table rows, and polish the QuickSendModal visual styling.

Purpose: Consistent subtitles create a polished, professional feel. White table row backgrounds improve readability. QuickSendModal polish aligns with the warm design system.

Output: All dashboard pages have consistent subtitle formatting, tables have white row backgrounds, QuickSendModal matches current design language.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/49-custom-services-visual-polish/49-RESEARCH.md

Key files:
@components/history/history-client.tsx (canonical subtitle pattern — DO NOT MODIFY, reference only)
@components/jobs/jobs-client.tsx
@app/(dashboard)/analytics/page.tsx
@app/(dashboard)/feedback/page.tsx
@app/(dashboard)/campaigns/campaigns-shell.tsx
@components/customers/customers-client.tsx
@components/jobs/job-table.tsx
@components/history/history-table.tsx
@components/send/quick-send-modal.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Normalize page subtitles across dashboard pages</name>
  <files>
    components/jobs/jobs-client.tsx
    app/(dashboard)/analytics/page.tsx
    app/(dashboard)/feedback/page.tsx
    app/(dashboard)/campaigns/campaigns-shell.tsx
    components/customers/customers-client.tsx
  </files>
  <action>
The canonical subtitle pattern (from HistoryClient) is:
```tsx
<div>
  <h1 className="text-2xl font-semibold tracking-tight">{title}</h1>
  <p className="text-muted-foreground">
    {staticDescription} &middot; {dynamicCount}
  </p>
</div>
```

Apply this pattern to each page. Use only already-available count data — do NOT add new DB queries.

**1. jobs-client.tsx** (currently: `{totalJobs} jobs total` with no static description)

Change the header section (around line 59-64) from:
```tsx
<h1 className="text-2xl font-semibold tracking-tight">Jobs</h1>
<p className="text-muted-foreground">
  {totalJobs} {totalJobs === 1 ? 'job' : 'jobs'} total
</p>
```
To:
```tsx
<h1 className="text-2xl font-semibold tracking-tight">Jobs</h1>
<p className="text-muted-foreground">
  Track your service jobs &middot; {totalJobs} total
</p>
```

**2. analytics/page.tsx** (currently: bare `<h1>` with `text-2xl font-bold mb-6`, no subtitle)

Change the header from:
```tsx
<h1 className="text-2xl font-bold mb-6">Analytics</h1>
```
To:
```tsx
<div>
  <h1 className="text-2xl font-semibold tracking-tight">Analytics</h1>
  <p className="text-muted-foreground">
    Track review performance by service type
  </p>
</div>
```

Note: Analytics page doesn't have an obvious count to display in the subtitle. The `analyticsData` is an array of service type breakdowns, but showing its length is not meaningful ("3 service types" isn't useful). So use a static description only, without a `&middot; {count}` suffix. This is acceptable — the pattern is "static description + optional dot + count".

Also normalize `font-bold` to `font-semibold` and add `tracking-tight` to match the canonical pattern. Remove the standalone `mb-6` (the parent `space-y-6` handles spacing).

**3. feedback/page.tsx** (currently: icon + bold h1 + generic description, no count)

Change the header section (around lines 44-51) from:
```tsx
<div className="mb-8">
  <div className="flex items-center gap-3 mb-2">
    <ChatCircle size={24} weight="regular" />
    <h1 className="text-2xl font-bold">Customer Feedback</h1>
  </div>
  <p className="text-muted-foreground">
    Private feedback from customers collected through your review funnel.
  </p>
</div>
```
To:
```tsx
<div>
  <h1 className="text-2xl font-semibold tracking-tight">Customer Feedback</h1>
  <p className="text-muted-foreground">
    Private feedback from your review funnel &middot; {stats.total} total
  </p>
</div>
```

Remove the `ChatCircle` icon from the h1 row (other page headers don't use icons inline with the title). Remove `mb-8` wrapper div — the parent `space-y-6` handles spacing. The `stats.total` is already available from `getFeedbackStats()`.

Also remove the `ChatCircle` import from `@phosphor-icons/react/dist/ssr` if it's no longer used anywhere in the file.

**4. campaigns-shell.tsx** (currently: has subtitle but no count)

The current header (around line 42-44):
```tsx
<h1 className="text-2xl font-semibold">Campaigns</h1>
<p className="text-muted-foreground">
  Automated review request sequences for completed jobs
</p>
```

This already follows the pattern but lacks a count and `tracking-tight`. The shell doesn't have a campaign count prop. Two options:
- Add the campaign count as a prop (requires passing from page.tsx)
- Keep the static description only

**Keep it simple:** Add `tracking-tight` to the h1. The subtitle is already descriptive. Since we don't have `campaigns.length` in the shell component, don't add a count. The static description is sufficient.

Update to:
```tsx
<h1 className="text-2xl font-semibold tracking-tight">Campaigns</h1>
<p className="text-muted-foreground">
  Automated review request sequences for completed jobs
</p>
```

**5. customers-client.tsx** (currently: `text-3xl font-bold`, static subtitle, no count)

Change the header (around lines 157-161) from:
```tsx
<h1 className='text-3xl font-bold tracking-tight'>Customers</h1>
<p className='text-muted-foreground mt-1'>
  Customers are created automatically when you complete jobs
</p>
```
To:
```tsx
<h1 className="text-2xl font-semibold tracking-tight">Customers</h1>
<p className="text-muted-foreground">
  Created automatically when you complete jobs &middot; {initialCustomers.length} total
</p>
```

Change `text-3xl` to `text-2xl` and `font-bold` to `font-semibold` to match the canonical pattern. Remove `mt-1` on the paragraph (other pages don't use it). Add count from `initialCustomers.length`.
  </action>
  <verify>
1. `pnpm typecheck` passes
2. `pnpm lint` passes
3. Grep `tracking-tight` across all 5 modified files — present in each h1
4. Grep `&middot;` in jobs-client.tsx, feedback/page.tsx, customers-client.tsx — present
  </verify>
  <done>
All dashboard pages follow the canonical subtitle pattern: `text-2xl font-semibold tracking-tight` h1 + `text-muted-foreground` subtitle with static description and optional middot + count. Typography is consistent across Jobs, Analytics, Feedback, Campaigns, and Customers pages.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add white backgrounds to table rows and polish QuickSendModal</name>
  <files>
    components/jobs/job-table.tsx
    components/history/history-table.tsx
    components/send/quick-send-modal.tsx
  </files>
  <action>
**job-table.tsx — Add bg-card to table body rows:**

Find the `<tr>` inside the `table.getRowModel().rows.map()` block (around line 222-226):
```tsx
<tr
  key={row.id}
  onClick={() => handleRowClick(row.original)}
  className="border-t border-border transition-colors hover:bg-muted/50 cursor-pointer"
>
```

Add `bg-card` to the className:
```tsx
className="border-t border-border bg-card transition-colors hover:bg-muted/50 cursor-pointer"
```

Do NOT modify the `<thead>` rows — only `<tbody>` rows get the white background. The `<thead>` already has `bg-muted/50` which is correct.

**history-table.tsx — Add bg-card to TableRow:**

Find the `<TableRow>` inside the data rows map (around line 83-85):
```tsx
<TableRow
  key={row.id}
  className="group cursor-pointer hover:bg-muted/50"
```

Add `bg-card` to the className:
```tsx
className="group cursor-pointer bg-card hover:bg-muted/50"
```

Do NOT modify the `<TableRow>` inside `<TableHeader>` — header rows keep their default background.

Do NOT add `bg-card` to the empty state `<TableRow>` (the "No messages found." row) — it should stay transparent.

**CRITICAL:** Do NOT modify `components/ui/table.tsx` — the `TableRow` base class should NOT have `bg-card` added to it. Apply per-usage at the call site only.

**quick-send-modal.tsx — Visual polish:**

The current modal structure is already correct. Apply these refinements:

1. Add `gap-4` to `DialogContent` for consistent internal spacing:
   ```tsx
   <DialogContent className="sm:max-w-xl max-h-[90vh] overflow-y-auto gap-4">
   ```

2. Tighten the warning banner spacing. Currently it uses `p-4` which is fine, but add `mt-0` explicitly after DialogHeader to remove any default gap between the header description and the banner (DialogContent may add space between children):
   Actually, the warning banner follows the DialogHeader naturally. The current rendering is fine. Focus on:

   - Ensure DialogContent uses consistent spacing. The children flow is: DialogHeader -> warning div -> QuickSendForm. Add `space-y-4` to DialogContent if not already present:
   ```tsx
   <DialogContent className="sm:max-w-xl max-h-[90vh] overflow-y-auto space-y-4">
   ```

   This ensures consistent 16px gap between DialogHeader, warning banner, and form. If `DialogContent` already applies gap or space via its base styles, skip this to avoid double-spacing — check the ui/dialog.tsx `DialogContent` base classes first.

3. Since this is a visual refinement, the key improvement is ensuring the spacing between the three sections (header, warning, form) is even. If the current rendering already looks even, this change is cosmetic. Apply `space-y-4` or verify existing spacing is consistent.

The warning banner itself is already using the correct semantic tokens (`border-warning-border bg-warning-bg`, `text-warning-foreground`, `text-warning`). No color changes needed.
  </action>
  <verify>
1. `pnpm typecheck` passes
2. `pnpm lint` passes
3. Grep `bg-card` in job-table.tsx — present in tbody tr className
4. Grep `bg-card` in history-table.tsx — present in data TableRow className
5. Verify ui/table.tsx was NOT modified
  </verify>
  <done>
Jobs table and History table rows render with white (`bg-card`) background. QuickSendModal has consistent internal spacing. No changes to shared ui/table.tsx component.
  </done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` — zero errors
2. `pnpm lint` — zero errors or warnings
3. All 5 dashboard pages have consistent subtitle pattern with `text-2xl font-semibold tracking-tight` h1
4. Jobs table tbody rows have `bg-card` class
5. History table data rows have `bg-card` class
6. `components/ui/table.tsx` was NOT modified
</verification>

<success_criteria>
- Jobs, Analytics, Feedback, Campaigns, and Customers pages all display consistent subtitle format
- Jobs table rows have white background (not transparent)
- History table rows have white background (matching Jobs table)
- QuickSendModal spacing is consistent with design system
- No TypeScript errors, no lint errors
</success_criteria>

<output>
After completion, create `.planning/phases/49-custom-services-visual-polish/49-03-SUMMARY.md`
</output>
