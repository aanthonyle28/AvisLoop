---
phase: 30-v2-alignment
plan: 09
type: execute
wave: 4
depends_on: []
files_modified:
  - components/ui/checkbox.tsx
  - components/ui/button.tsx
  - components/layout/skip-link.tsx
  - app/(dashboard)/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Checkbox has 44px touch target (via wrapper)"
    - "Icon buttons have 44px touch target"
    - "All icon-only buttons have aria-label attribute"
    - "Skip link exists and jumps to main content"
  artifacts:
    - path: "components/layout/skip-link.tsx"
      provides: "Accessibility skip link component"
      min_lines: 15
    - path: "components/ui/checkbox.tsx"
      provides: "Accessible checkbox with 44px touch target"
      contains: "min-h-[44px]"
  key_links:
    - from: "app/(dashboard)/layout.tsx"
      to: "components/layout/skip-link.tsx"
      via: "SkipLink import"
      pattern: "SkipLink"
---

<objective>
Fix accessibility issues identified in QA-AUDIT: increase checkbox/icon touch targets to 44px minimum, add aria-labels to icon buttons, and add skip link for keyboard navigation.

Purpose: A11Y-01/A11Y-02/A11Y-03/A11Y-04 requirements. WCAG compliance.
Output: Accessible components with proper touch targets and skip link.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-v2-alignment/30-RESEARCH.md
@.planning/UX-AUDIT.md

# Existing files
@components/ui/checkbox.tsx
@components/ui/button.tsx
@app/(dashboard)/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update checkbox with 44px touch target</name>
  <files>components/ui/checkbox.tsx</files>
  <action>
Update components/ui/checkbox.tsx to wrap the checkbox in a 44x44px touch target container:

```typescript
"use client"

import * as React from "react"
import * as CheckboxPrimitive from "@radix-ui/react-checkbox"
import { Check } from "@phosphor-icons/react"  // Migrate from lucide
import { cn } from "@/lib/utils"

const Checkbox = React.forwardRef<
  React.ElementRef<typeof CheckboxPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>
>(({ className, ...props }, ref) => (
  // Wrapper provides 44x44px touch target while keeping visual size at 16x16px
  <div className="inline-flex min-h-[44px] min-w-[44px] items-center justify-center">
    <CheckboxPrimitive.Root
      ref={ref}
      className={cn(
        "peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow",
        "focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",
        "disabled:cursor-not-allowed disabled:opacity-50",
        "data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",
        className
      )}
      {...props}
    >
      <CheckboxPrimitive.Indicator className={cn("flex items-center justify-center text-current")}>
        <Check className="h-4 w-4" weight="bold" />
      </CheckboxPrimitive.Indicator>
    </CheckboxPrimitive.Root>
  </div>
))
Checkbox.displayName = CheckboxPrimitive.Root.displayName

export { Checkbox }
```

Key changes:
1. Wrapped in div with min-h-[44px] min-w-[44px] for touch target
2. Migrated Check icon from lucide-react to @phosphor-icons/react
3. Visual checkbox size remains 16x16px (h-4 w-4)
4. Touch target is 44x44px centered
  </action>
  <verify>Run `pnpm typecheck` to confirm no type errors</verify>
  <done>Checkbox has 44px touch target via wrapper</done>
</task>

<task type="auto">
  <name>Task 2: Create skip-link component</name>
  <files>components/layout/skip-link.tsx</files>
  <action>
Create components/layout/skip-link.tsx:

```typescript
import { cn } from '@/lib/utils'

export function SkipLink() {
  return (
    <a
      href="#main-content"
      className={cn(
        // Positioning: absolute, off-screen by default
        "absolute left-0 top-0 z-[100]",
        "-translate-y-full",
        // Styling when visible (on :focus)
        "focus:translate-y-0",
        "bg-primary text-primary-foreground",
        "px-4 py-3 text-sm font-medium",
        // Ensure high contrast and visibility
        "focus:outline-none focus:ring-2 focus:ring-ring",
        // Transition
        "transition-transform duration-200"
      )}
    >
      Skip to main content
    </a>
  )
}
```

This component:
- Is off-screen by default (-translate-y-full)
- Becomes visible when focused via keyboard Tab
- Links to #main-content (must match id on main element)
- High contrast primary color for visibility
- First focusable element in DOM order
  </action>
  <verify>Run `pnpm typecheck` to confirm component compiles</verify>
  <done>SkipLink component created at components/layout/skip-link.tsx</done>
</task>

<task type="auto">
  <name>Task 3: Add skip link to dashboard layout and ensure main has id</name>
  <files>app/(dashboard)/layout.tsx</files>
  <action>
Update app/(dashboard)/layout.tsx:

1. Add import:
```typescript
import { SkipLink } from '@/components/layout/skip-link'
```

2. Add SkipLink as FIRST element inside the layout, and ensure main has id="main-content":

```typescript
export default async function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  // ... existing code

  return (
    <>
      <SkipLink />  {/* Must be first for keyboard tab order */}
      <div className="flex min-h-screen bg-background">
        <Sidebar dashboardBadge={dashboardBadge} />
        <div className="flex flex-1 flex-col">
          <main id="main-content" className="flex-1 p-4 md:p-6 pb-[72px] md:pb-6">
            {children}
          </main>
          <BottomNav />
          <MobileFAB />
        </div>
      </div>
    </>
  )
}
```

The SkipLink must be the first element so it receives keyboard focus first when user presses Tab.
  </action>
  <verify>Tab through page, first focus should be skip link that appears and clicking takes to main content</verify>
  <done>Skip link added to dashboard layout, main element has id="main-content"</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. `pnpm lint` passes
3. Checkbox wrapper is 44x44px (inspect in dev tools)
4. Tab key first focuses skip link
5. Skip link becomes visible on focus
6. Clicking skip link jumps to main content
7. Checkbox icon is from Phosphor (not lucide)
</verification>

<success_criteria>
- Checkbox touch target is 44px (A11Y-01)
- Skip link works for keyboard navigation (A11Y-04)
- WCAG 2.5.5 (Target Size) addressed
- WCAG 2.4.1 (Bypass Blocks) addressed
</success_criteria>

<output>
After completion, create `.planning/phases/30-v2-alignment/30-09-SUMMARY.md`
</output>
