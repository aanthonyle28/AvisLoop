---
phase: 35-card-variants-dashboard-quick-wins
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/card.tsx
autonomous: true

must_haves:
  truths:
    - "Existing Card usages (no variant prop) render identically to before"
    - "Card accepts variant prop with values: default, amber, blue, green, red, ghost, subtle"
    - "InteractiveCard shows a right-arrow indicator always visible (muted at rest, prominent on hover)"
    - "InteractiveCard no longer lifts vertically on hover (translate-y removed)"
    - "InteractiveCard accepts the same variant props as Card"
  artifacts:
    - path: "components/ui/card.tsx"
      provides: "CVA-backed Card and InteractiveCard with variant support and arrow affordance"
      contains: "cardVariants"
  key_links:
    - from: "components/ui/card.tsx"
      to: "class-variance-authority"
      via: "cva import"
      pattern: "import.*cva.*class-variance-authority"
---

<objective>
Convert Card and InteractiveCard components to CVA-backed variants and replace InteractiveCard's translate-y lift with an always-visible arrow indicator.

Purpose: Establishes the card variant system (DS-02) and navigability affordance (DASH-02) that downstream plans and phases depend on.
Output: Updated `card.tsx` with CVA variants and arrow affordance.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@components/ui/card.tsx
@components/ui/button.tsx (CVA pattern reference — mirror this approach exactly)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert Card to CVA with 6 color variants</name>
  <files>components/ui/card.tsx</files>
  <action>
    Convert Card component from plain cn() wrapper to CVA-backed component, following the exact pattern established in button.tsx.

    1. Add imports: `import { cva, type VariantProps } from "class-variance-authority"` and `import { ArrowRight } from "@phosphor-icons/react"`

    2. Create `cardVariants` CVA definition with these variants:
       - `default`: `"bg-card border-border"` (current behavior — preserves backward compat)
       - `amber`: `"bg-amber-50/60 border-amber-200/50 dark:bg-amber-950/20 dark:border-amber-900/30"`
       - `blue`: `"bg-blue-50/60 border-blue-200/50 dark:bg-blue-950/20 dark:border-blue-900/30"`
       - `green`: `"bg-green-50/60 border-green-200/50 dark:bg-green-950/20 dark:border-green-900/30"`
       - `red`: `"bg-red-50/60 border-red-200/50 dark:bg-red-950/20 dark:border-red-900/30"`
       - `ghost`: `"bg-transparent border-transparent"`
       - `subtle`: `"bg-muted border-border/50"`

       Base classes: `"rounded-lg border text-card-foreground"`
       Default variant: `"default"`

       NOTE: Use low opacity modifiers (/60 for bg, /50 for border) to keep tints whisper-quiet as specified in CONTEXT.md. These are intentionally using Tailwind color scale classes for the card variants themselves (not semantic tokens) since the tint is a decorative card-level concept, not a semantic status color.

    3. Create `CardProps` interface extending `React.HTMLAttributes<HTMLDivElement>` and `VariantProps<typeof cardVariants>`.

    4. Update Card component:
       - Change signature to accept `CardProps` (destructure `variant` and `className` from props)
       - Use `cn(cardVariants({ variant }), className)` for className
       - CRITICAL: Destructure `variant` OUT of `...props` before spreading to avoid passing unknown DOM attribute

    5. Update InteractiveCard component:
       - Same `CardProps` interface (add `children` to destructured props since we need to render arrow alongside)
       - Remove `motion-safe:hover:-translate-y-1` entirely
       - Add `group` class to the outer div (needed for group-hover on arrow)
       - Add hover effect: `"hover:shadow-sm"` (subtle shadow replaces the lift)
       - Render children followed by arrow span inside the div
       - Arrow markup: `<ArrowRight size={14} weight="bold" className="absolute bottom-3 right-3 text-muted-foreground/30 transition-colors duration-200 group-hover:text-muted-foreground/70" />`
       - Add `relative` class to the outer div (needed for absolute positioning of arrow)
       - The arrow is always visible (muted opacity at rest), more prominent on hover via group-hover

    6. Export `cardVariants` alongside existing exports so other files can use the variant type if needed.
  </action>
  <verify>
    Run `pnpm typecheck` — must pass with zero errors. Specifically verify no "Property 'variant' does not exist on type 'HTMLAttributes'" errors.
  </verify>
  <done>
    - card.tsx uses CVA with 6 named variants plus default
    - InteractiveCard has ArrowRight icon always visible at bottom-right
    - InteractiveCard no longer has translate-y hover effect
    - All existing Card/InteractiveCard usages (which pass no variant) continue working unchanged due to defaultVariants
    - `pnpm typecheck` passes
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify backward compatibility with build</name>
  <files>components/ui/card.tsx</files>
  <action>
    Run the full build to confirm no existing Card/InteractiveCard consumers break.

    1. Run `pnpm lint` to check for any linting issues in the modified file
    2. Run `pnpm typecheck` to verify full type safety
    3. If any errors reference card.tsx or Card/InteractiveCard imports, fix them

    The key safety net is that `defaultVariants: { variant: "default" }` ensures every existing `<Card>` and `<InteractiveCard>` usage (which passes no variant prop) renders with `bg-card border-border` — identical to the pre-CVA behavior.
  </action>
  <verify>
    `pnpm lint && pnpm typecheck` — both pass with zero errors.
  </verify>
  <done>
    - Lint passes
    - Typecheck passes
    - No downstream breakage from CVA conversion
  </done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. `pnpm lint` passes
3. `grep -n "cardVariants" components/ui/card.tsx` shows CVA definition exists
4. `grep -n "ArrowRight" components/ui/card.tsx` shows arrow import and usage
5. `grep -n "translate-y" components/ui/card.tsx` returns NO matches (lift effect removed)
</verification>

<success_criteria>
- card.tsx has CVA variants (amber, blue, green, red, ghost, subtle) with defaultVariants preserving backward compat
- InteractiveCard shows ArrowRight icon at bottom-right, always visible with muted→prominent hover transition
- InteractiveCard no longer uses translate-y lift
- Build passes (lint + typecheck)
</success_criteria>

<output>
After completion, create `.planning/phases/35-card-variants-dashboard-quick-wins/35-01-SUMMARY.md`
</output>
