---
phase: 19-ux-ui-redesign
plan: 05
type: execute
wave: 3
depends_on: ["19-03"]
files_modified:
  - components/send/stat-strip.tsx
  - components/send/recent-activity-strip.tsx
  - app/(dashboard)/send/page.tsx
  - components/dashboard/stat-cards.tsx
  - components/dashboard/recent-activity.tsx
  - components/dashboard/response-rate-card.tsx
autonomous: true

must_haves:
  truths:
    - "Compact stat strip shows Monthly Usage, Review Rate, Needs Attention in a row"
    - "Needs Attention card links to filtered Requests page"
    - "Monthly Usage shows smart CTA at 80-90% usage"
    - "Recent Activity strip shows individual items on Quick Send tab"
    - "Recent Activity strip shows batch summaries on Bulk Send tab"
    - "Clicking activity item opens Request detail drawer"
    - "View all links to Requests page"
  artifacts:
    - path: "components/send/stat-strip.tsx"
      provides: "Compact horizontal stat cards"
      exports: ["StatStrip"]
    - path: "components/send/recent-activity-strip.tsx"
      provides: "Tab-aware recent activity"
      exports: ["RecentActivityStrip"]
  key_links:
    - from: "components/send/stat-strip.tsx"
      to: "Needs Attention link"
      via: "href to /history?status=failed"
      pattern: "href.*history"
    - from: "components/send/recent-activity-strip.tsx"
      to: "active tab"
      via: "mode prop controls individual vs batch display"
      pattern: "mode.*quick|bulk"
---

<objective>
Build the stat strip and recent activity strip that sit above the Send tabs, providing at-a-glance metrics and recent send history.

Purpose: These strips give business owners context about their sending activity without leaving the Send page. The stat strip shows key metrics with smart CTAs, and the recent activity strip provides quick access to recent send details.

Output: StatStrip component (compact 3-card row), RecentActivityStrip (tab-aware activity feed), integrated into Send page. Old dashboard stat cards and activity components deleted.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/19-ux-ui-redesign/19-CONTEXT.md
@.planning/phases/19-ux-ui-redesign/19-RESEARCH.md
@.planning/phases/19-ux-ui-redesign/19-03-SUMMARY.md
@components/dashboard/stat-cards.tsx
@components/dashboard/recent-activity.tsx
@app/(dashboard)/send/page.tsx
@lib/data/send-logs.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Stat Strip and Recent Activity Strip</name>
  <files>
    components/send/stat-strip.tsx
    components/send/recent-activity-strip.tsx
  </files>
  <action>
**StatStrip (components/send/stat-strip.tsx):**
- Server-compatible component (no 'use client' needed — purely presentational)
- Props: `usage: { count, limit, tier }`, `responseRate: { rate, total, responded }`, `needsAttention: { total, pending, failed }`
- Layout: Horizontal row of 3 compact cards (`grid grid-cols-3 gap-3`)
- Each card: compact design (no large numbers, horizontal layout)
  - **Monthly Usage:** Progress bar + "X/Y sends" text
    - Normal: just informational
    - 80-90% usage: show "Manage plan" link to /billing
    - At limit: show "Upgrade" link to /billing with warning styling
  - **Review Rate:** Percentage + small star indicator
    - Informational only, no CTA
  - **Needs Attention:** Count + link
    - Clickable card → links to `/history?status=failed` (filtered Requests page)
    - Shows breakdown: "X pending, Y failed"
- Card styling: `bg-white border border-[#E3E3E3] rounded-lg px-4 py-3` (compact, not the tall cards from dashboard)
- On mobile: stack vertically or use smaller grid (`grid-cols-1 sm:grid-cols-3`)

**RecentActivityStrip (components/send/recent-activity-strip.tsx):**
- `'use client'` component
- Props: `activities: RecentActivity[]`, `mode: 'quick' | 'bulk'`, `onItemClick?: (id: string) => void`
- Layout: Horizontal scrollable strip (like a feed)
- Header: "Recent Activity" left + "View all" link right (links to /history)
- When `mode === 'quick'`:
  - Show individual items: "{name} . {status} . {relative time}" (e.g., "John . Delivered . 2m")
  - Each item is a compact row with avatar initials, name, status badge, relative time
  - Max 5 items
- When `mode === 'bulk'`:
  - Group activities by batch (same created_at minute or batch_id if available)
  - Show summaries: "{count} delivered . {relative time}" (e.g., "24 delivered . 2m ago")
  - For now: simple grouping by rounding created_at to nearest minute
- Clicking an item calls `onItemClick(id)` — Plan 07 will wire this to the detail drawer
- Empty state: "No sends yet — send your first review request!"
- Use `formatDistanceToNow` from date-fns for relative times (already installed)
- Reuse StatusBadge from existing recent-activity.tsx or history/status-badge.tsx

**DELETE old dashboard components:**
- Delete `components/dashboard/stat-cards.tsx` (replaced by stat-strip.tsx)
- Delete `components/dashboard/recent-activity.tsx` (replaced by recent-activity-strip.tsx)
- Delete `components/dashboard/response-rate-card.tsx` (unused, replaced by stat strip)
- Delete `components/dashboard/avatar-initials.tsx` ONLY if it's not imported elsewhere — check first. If used elsewhere, keep it.
  </action>
  <verify>
- `pnpm typecheck` passes
- `pnpm lint` passes
- StatStrip renders 3 compact cards with correct data
- RecentActivityStrip shows individual items and respects mode prop
  </verify>
  <done>StatStrip shows 3 compact metrics with smart CTAs. RecentActivityStrip shows tab-aware activity feed. Old dashboard stat cards and recent activity components deleted.</done>
</task>

<task type="auto">
  <name>Task 2: Integrate Strips into Send Page</name>
  <files>
    app/(dashboard)/send/page.tsx
  </files>
  <action>
**Update Send page (app/(dashboard)/send/page.tsx):**
- The Send page Server Component already fetches usage, responseRate, needsAttention, recentActivity (from Plan 03)
- Add `<StatStrip>` above the Tabs component (renders for both tabs)
- Pass the correct props from fetched data
- For RecentActivityStrip: render inside the SendPageClient (client wrapper) so it can react to active tab
- The client wrapper should:
  - Track active tab state
  - Pass `mode={activeTab === 'quick-send' ? 'quick' : 'bulk'}` to RecentActivityStrip
  - Render RecentActivityStrip below StatStrip, above tabs content
- Ensure stat strip is hidden if onboarding not complete (same as current behavior: hidden until first send)
- Wire "View all" link in RecentActivityStrip to `/history`
- Wire Needs Attention card link to `/history?status=failed`
- onItemClick handler: for now, just `router.push('/history')` — Plan 07 adds the drawer
  </action>
  <verify>
- `pnpm typecheck` passes
- `pnpm lint` passes
- Navigate to /send: see stat strip above tabs
- See recent activity strip below stat strip
- Switch between Quick Send and Bulk Send tabs: activity strip changes mode
- Needs Attention card links to filtered history
  </verify>
  <done>Send page shows stat strip and recent activity strip. Activity strip is tab-aware. Links to history/billing work. Build passes.</done>
</task>

</tasks>

<verification>
- Stat strip shows 3 compact cards with correct metrics
- Monthly Usage smart CTA appears at 80%+ usage
- Needs Attention links to /history?status=failed
- Recent activity shows individual items on Quick Send tab
- Recent activity shows batch summaries on Bulk Send tab
- View all links to /history
- Old dashboard stat-cards.tsx and recent-activity.tsx deleted
- `pnpm typecheck && pnpm lint` pass
</verification>

<success_criteria>
Compact stat strip and tab-aware recent activity strip integrated into Send page. Smart CTAs on usage card. Old dashboard components cleaned up. Both strips render correctly on desktop and mobile.
</success_criteria>

<output>
After completion, create `.planning/phases/19-ux-ui-redesign/19-05-SUMMARY.md`
</output>
