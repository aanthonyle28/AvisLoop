---
phase: 19-ux-ui-redesign
plan: 02
type: execute
wave: 2
depends_on: ["19-01"]
files_modified:
  - components/ui/skeleton.tsx
  - components/ui/progress-bar.tsx
  - components/layout/app-shell.tsx
  - app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Page transitions show thin progress bar at top of viewport"
    - "Skeleton components use softer pulse animation"
    - "Actionable toasts support View details and Undo buttons"
    - "Action toasts auto-dismiss after 6 seconds"
  artifacts:
    - path: "components/ui/progress-bar.tsx"
      provides: "Thin top progress bar for route transitions"
      exports: ["NavigationProgressBar"]
    - path: "components/ui/skeleton.tsx"
      provides: "Updated skeleton with softer colors"
      contains: "animate-pulse"
  key_links:
    - from: "components/ui/progress-bar.tsx"
      to: "next/navigation"
      via: "usePathname for route change detection"
      pattern: "usePathname"
    - from: "components/layout/app-shell.tsx"
      to: "components/ui/progress-bar.tsx"
      via: "Renders progress bar at top of shell"
      pattern: "NavigationProgressBar"
---

<objective>
Create shared UI foundation: navigation progress bar, modernized skeletons, and actionable toast patterns.

Purpose: These are cross-cutting UI primitives used by every subsequent plan. The progress bar replaces jarring page transitions, softer skeletons improve perceived performance, and actionable toasts are needed by Send and Requests plans.

Output: NavigationProgressBar component, updated Skeleton with softer animation, documented actionable toast patterns ready for use.
</objective>

<execution_context>
@C:\Users\aanth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aanth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/19-ux-ui-redesign/19-CONTEXT.md
@.planning/phases/19-ux-ui-redesign/19-RESEARCH.md
@components/ui/skeleton.tsx
@components/ui/sonner.tsx
@components/layout/app-shell.tsx
@app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Navigation Progress Bar and Update Skeletons</name>
  <files>
    components/ui/progress-bar.tsx
    components/ui/skeleton.tsx
    components/layout/app-shell.tsx
  </files>
  <action>
**NavigationProgressBar (components/ui/progress-bar.tsx):**
- Create a `'use client'` component that shows a thin (2-3px) progress bar at the very top of the viewport
- YouTube/GitHub style: slides in from left, pauses at ~80%, completes on route change finish
- Implementation approach:
  - Use `usePathname()` from `next/navigation` to detect route changes
  - On pathname change: start animation (0% -> 80% over ~500ms with ease-out)
  - After pathname settles: complete animation (80% -> 100% over ~200ms), then fade out
  - Use `useEffect` with pathname dependency to trigger start/complete cycle
  - Use CSS `transition` for smooth width changes, `opacity` for fade-out
  - Bar color: `bg-primary` (matches brand)
  - Position: `fixed top-0 left-0 right-0 z-[100]` (above everything)
  - Height: `h-[2px]` or `h-[3px]`
- Keep it lightweight (~40-50 lines). No external dependencies.
- Export as `NavigationProgressBar`

**Update Skeleton (components/ui/skeleton.tsx):**
- Soften the pulse animation:
  - Change background from `bg-accent` to `bg-muted/60` (softer gray)
  - Add custom animation: smoother pulse with longer duration (`animate-[pulse_2s_ease-in-out_infinite]`)
  - Alternatively, keep `animate-pulse` but apply softer colors
- Keep the existing API (className passthrough) so all existing skeletons still work

**Update AppShell (components/layout/app-shell.tsx):**
- Import and render `<NavigationProgressBar />` at the top of the shell, before the flex container
- This ensures the progress bar is visible across all dashboard pages
  </action>
  <verify>
- `pnpm typecheck` passes
- `pnpm lint` passes
- Navigate between pages in dev mode and confirm thin progress bar appears at top during transitions
  </verify>
  <done>Progress bar shows during route transitions. Skeletons use softer pulse. Both integrate into existing layout without breaking anything.</done>
</task>

<task type="auto">
  <name>Task 2: Establish Actionable Toast Patterns</name>
  <files>
    lib/utils/toast.ts
  </files>
  <action>
**Actionable Toast Helpers (lib/utils/toast.ts):**
- Create utility functions that wrap sonner's `toast()` with consistent patterns:

```typescript
import { toast } from 'sonner'

// Send success toast with "View details" action
export function toastSendSuccess(opts: {
  count: number
  onViewDetails?: () => void
}) {
  toast.success(
    `Review request${opts.count > 1 ? 's' : ''} sent`,
    {
      duration: 6000,
      ...(opts.onViewDetails && {
        action: {
          label: 'View details',
          onClick: opts.onViewDetails,
        },
      }),
    }
  )
}

// Schedule success toast
export function toastScheduleSuccess(opts: {
  count: number
  scheduledFor: string
}) {
  toast.success(
    `${opts.count} request${opts.count > 1 ? 's' : ''} scheduled`,
    { duration: 6000 }
  )
}

// Undo toast for destructive actions (archive, delete)
export function toastWithUndo(opts: {
  message: string
  onUndo: () => void
}) {
  toast(opts.message, {
    duration: 5000,
    action: {
      label: 'Undo',
      onClick: opts.onUndo,
    },
  })
}

// Error toast (standardized)
export function toastError(message: string) {
  toast.error(message, { duration: 5000 })
}
```

- These helpers will be imported by Send, Requests, and Contacts components in later plans
- Keep it simple: just wrappers around sonner with consistent duration and action patterns
- Do NOT modify existing toast calls in other files yet (later plans will migrate)
  </action>
  <verify>
- `pnpm typecheck` passes
- `pnpm lint` passes
- File exports all 4 helper functions with correct types
  </verify>
  <done>Toast utility file exists with toastSendSuccess, toastScheduleSuccess, toastWithUndo, and toastError helpers. All typed, all using sonner under the hood.</done>
</task>

</tasks>

<verification>
- Progress bar visible at top of page during navigation
- Skeleton components render with softer colors
- Toast helpers importable and correctly typed
- `pnpm typecheck && pnpm lint` both pass
- No visual regressions on existing pages
</verification>

<success_criteria>
NavigationProgressBar renders during route changes. Skeleton has softer animation. Four toast utility functions exported from lib/utils/toast.ts. All existing pages unaffected.
</success_criteria>

<output>
After completion, create `.planning/phases/19-ux-ui-redesign/19-02-SUMMARY.md`
</output>
