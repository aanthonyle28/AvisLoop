# Milestone v1.2.1: Tech Debt Closure

**Status:** SHIPPED 2026-02-01
**Phases:** 17-18
**Total Plans:** 4

## Overview

v1.2.1 was an audit-driven tech debt closure milestone. After the v1.2 audit identified a deployment blocker (missing database migration), an unverified phase, and several low-priority cleanup items, Phases 17-18 were created to systematically resolve all issues. This milestone ensures the codebase is clean, fully verified, and ready for production deployment.

## Phases

### Phase 17: Deployment & Critical Fixes
**Goal**: Fix deployment blocker (missing migration) and complete Phase 4 verification
**Depends on**: Phase 16
**Requirements**: None (tech debt closure)
**Gap Closure**: Closes audit items #1 (HIGH) and #3 (MEDIUM)
**Success Criteria** (what must be TRUE):
  1. Migration file exists that creates `scheduled_sends` table with all columns, RLS policies, and indexes
  2. Migration sequence (00009b) runs before 00010 (claim function) on a fresh database
  3. Phase 4 has a VERIFICATION.md confirming all 9 success criteria
  4. Password reset path audit item confirmed resolved (already fixed in code)
**Plans**: 2 plans in 1 wave

Plans:
- [x] 17-01-PLAN.md - Create missing scheduled_sends table migration (00009b)
- [x] 17-02-PLAN.md - Phase 4 formal verification + password reset path confirmation

### Phase 18: Code Cleanup
**Goal**: Clean up orphaned files, inline constant duplication, and stale verification docs
**Depends on**: Phase 17
**Requirements**: None (tech debt closure)
**Gap Closure**: Closes audit low-priority items
**Success Criteria** (what must be TRUE):
  1. `components/marketing/how-it-works.tsx` deleted (orphaned, unused)
  2. `send/page.tsx` imports `CONTACT_LIMITS` from `lib/constants/billing.ts` instead of inline definition
  3. Phase 13 VERIFICATION.md updated to reflect resolved gaps
  4. History page pagination UI present (load more or infinite scroll for >50 messages)
**Plans**: 2 plans in 1 wave

Plans:
- [x] 18-01-PLAN.md - Delete orphaned file, fix inline constant, update Phase 13 verification
- [x] 18-02-PLAN.md - History page pagination UI (prev/next controls)

## Progress

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 17. Deployment & Critical Fixes | 2/2 | Complete | 2026-01-30 |
| 18. Code Cleanup | 2/2 | Complete | 2026-02-01 |

---

## Milestone Summary

**Key Decisions:**
- D17-01-01: Include 'processing' status in CHECK constraint (migration 00010 compatibility)
- D17-01-02: Partial index on (status, scheduled_for) WHERE status='pending' (cron optimization)
- D17-01-03: No DELETE policy, use status changes instead (audit trail)
- D17-02-01: Verification based on code evidence rather than re-testing
- D18-01-01: Import billing constants from centralized module (single source of truth)
- D18-02-01: Hide pagination controls when total messages <= 50

**Issues Resolved:**
- HIGH: Missing scheduled_sends table migration causing fresh deploy failure
- MEDIUM: Phase 4 Core Sending never formally verified (9/9 criteria now confirmed)
- MEDIUM: Password reset redirect path mismatch (confirmed already fixed)
- LOW: Orphaned how-it-works.tsx component deleted
- LOW: Inline CONTACT_LIMITS duplication resolved
- LOW: Phase 13 verification stale status corrected
- LOW: History page had no pagination for >50 messages

**Issues Deferred:**
- None — all actionable items resolved

**Technical Debt Incurred:**
- None — this milestone was specifically about closing debt

---

_For current project status, see .planning/ROADMAP.md_
